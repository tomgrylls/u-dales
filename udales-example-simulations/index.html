
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="TODO:">
      
      
      
        <meta name="author" content="The uDALES Team">
      
      
        <link rel="canonical" href="https://uDALES.github.io/u-dales/udales-example-simulations/">
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-6.2.4">
    
    
      
        <title>Examples - uDALES</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.15aa0b43.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.75751829.min.css">
        
          
          
          <meta name="theme-color" content="#02a6f2">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="light-blue" data-md-color-accent="pink">
      
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#example-simulations" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="https://uDALES.github.io/u-dales" title="uDALES" class="md-header-nav__button md-logo" aria-label="uDALES">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      <div class="md-header-nav__ellipsis">
        <div class="md-header-nav__topic">
          <span class="md-ellipsis">
            uDALES
          </span>
        </div>
        <div class="md-header-nav__topic">
          <span class="md-ellipsis">
            
              Examples
            
          </span>
        </div>
      </div>
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/uDALES/u-dales" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    u-dales
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    




<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://uDALES.github.io/u-dales" title="uDALES" class="md-nav__button md-logo" aria-label="uDALES">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    uDALES
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/uDALES/u-dales" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    u-dales
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      



  <li class="md-nav__item">
    <a href=".." class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      



  <li class="md-nav__item">
    <a href="../udales-getting-started/" class="md-nav__link">
      Getting Started
    </a>
  </li>

    
      
      
      


  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Examples
        <span class="md-nav__icon md-icon"></span>
      </label>
    
    <a href="./" class="md-nav__link md-nav__link--active">
      Examples
    </a>
    
      
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    Prerequisites
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#run" class="md-nav__link">
    Run
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#customising-simulations" class="md-nav__link">
    Customising simulations
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#main-simulation-set-up-options" class="md-nav__link">
    Main simulation set-up options
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#list-of-examples" class="md-nav__link">
    List of examples
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#standard-simulation-setup" class="md-nav__link">
    Standard simulation setup
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#neutral-simulations" class="md-nav__link">
    Neutral simulations
  </a>
  
    <nav class="md-nav" aria-label="Neutral simulations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#001" class="md-nav__link">
    001
  </a>
  
    <nav class="md-nav" aria-label="001">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#no-buildings-bottom-surface-roughness" class="md-nav__link">
    No buildings, bottom surface roughness
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#constant-pressure-gradient" class="md-nav__link">
    Constant pressure gradient
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#output-instantaneous-fields" class="md-nav__link">
    Output: instantaneous fields
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#002" class="md-nav__link">
    002
  </a>
  
    <nav class="md-nav" aria-label="002">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aligned-cuboid-buildings" class="md-nav__link">
    Aligned cuboid buildings
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#output-space-time-averaged-profiles" class="md-nav__link">
    Output: space-time averaged profiles
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#non-neutral-simulations" class="md-nav__link">
    Non-neutral simulations
  </a>
  
    <nav class="md-nav" aria-label="Non-neutral simulations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#101" class="md-nav__link">
    101
  </a>
  
    <nav class="md-nav" aria-label="101">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#infinite-canyon-buildings" class="md-nav__link">
    Infinite canyon buildings
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#output-space-averaged-along-y" class="md-nav__link">
    Output: space-averaged along y
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#volume-flow-rate-forcing-in-x" class="md-nav__link">
    Volume flow rate forcing in x
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#temperature" class="md-nav__link">
    Temperature
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#isothermal-bc-for-temperature" class="md-nav__link">
    Isothermal BC for temperature
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#passive-scalars-line-source" class="md-nav__link">
    Passive scalars line source
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#output-instantaneous-fields-for-temperature-and-scalars" class="md-nav__link">
    Output: instantaneous fields for temperature and scalars
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#102" class="md-nav__link">
    102
  </a>
  
    <nav class="md-nav" aria-label="102">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#prerequisites-for-warmstart-simulation" class="md-nav__link">
    Prerequisites for warmstart simulation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#staggered-cuboid-buildings" class="md-nav__link">
    Staggered cuboid buildings
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#volume-flow-rate-forcing-in-x-and-y" class="md-nav__link">
    Volume flow rate forcing in x and y
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#constant-thermal-flux-bc-for-temperature" class="md-nav__link">
    Constant thermal flux BC for temperature
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#passive-scalars-point-source" class="md-nav__link">
    Passive scalars point source
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scalar-inflow-outflow-bc" class="md-nav__link">
    Scalar inflow-outflow BC
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#warmstart" class="md-nav__link">
    Warmstart
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#coldstart" class="md-nav__link">
    Coldstart
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#energy-balance-simulation" class="md-nav__link">
    Energy balance simulation
  </a>
  
    <nav class="md-nav" aria-label="Energy balance simulation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#201" class="md-nav__link">
    201
  </a>
  
    <nav class="md-nav" aria-label="201">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pre-defined-buildings" class="md-nav__link">
    Pre-defined buildings
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#grid-stretching-in-z" class="md-nav__link">
    Grid-stretching in z
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#output-time-averaged-fields" class="md-nav__link">
    Output: time averaged fields
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#energy-balance" class="md-nav__link">
    Energy Balance
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#moisture" class="md-nav__link">
    Moisture
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#coriolis-forcing-and-nudging" class="md-nav__link">
    Coriolis forcing and nudging
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#driver-simulation" class="md-nav__link">
    Driver simulation
  </a>
  
    <nav class="md-nav" aria-label="Driver simulation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#501" class="md-nav__link">
    501
  </a>
  
    <nav class="md-nav" aria-label="501">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#driverprecursor-simulation" class="md-nav__link">
    Driver/precursor simulation
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#502" class="md-nav__link">
    502
  </a>
  
    <nav class="md-nav" aria-label="502">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#prerequisites-simulation-with-external-forcing" class="md-nav__link">
    Prerequisites simulation with external forcing
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#buildings-from-lidar-image" class="md-nav__link">
    Buildings from LIDAR image
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#driven-simulation" class="md-nav__link">
    Driven simulation
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

    
      
      
      



  
  <li class="md-nav__item md-nav__item--nested">
    
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4" >
    
    <label class="md-nav__link" for="nav-4">
      User's docs
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="User's docs" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        <span class="md-nav__icon md-icon"></span>
        User's docs
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../udales-simulation-setup/" class="md-nav__link">
      Set-up
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="../udales-namoptions-overview/" class="md-nav__link">
      Configuration
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="../udales-pre-processing/" class="md-nav__link">
      Pre-processing
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="../udales-post-processing/" class="md-nav__link">
      Post-processing
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      



  <li class="md-nav__item">
    <a href="../udales-pub-list/" class="md-nav__link">
      Publication list
    </a>
  </li>

    
      
      
      



  <li class="md-nav__item">
    <a href="../udales-docs-software/index.html" class="md-nav__link">
      Software docs
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    Prerequisites
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#run" class="md-nav__link">
    Run
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#customising-simulations" class="md-nav__link">
    Customising simulations
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#main-simulation-set-up-options" class="md-nav__link">
    Main simulation set-up options
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#list-of-examples" class="md-nav__link">
    List of examples
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#standard-simulation-setup" class="md-nav__link">
    Standard simulation setup
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#neutral-simulations" class="md-nav__link">
    Neutral simulations
  </a>
  
    <nav class="md-nav" aria-label="Neutral simulations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#001" class="md-nav__link">
    001
  </a>
  
    <nav class="md-nav" aria-label="001">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#no-buildings-bottom-surface-roughness" class="md-nav__link">
    No buildings, bottom surface roughness
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#constant-pressure-gradient" class="md-nav__link">
    Constant pressure gradient
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#output-instantaneous-fields" class="md-nav__link">
    Output: instantaneous fields
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#002" class="md-nav__link">
    002
  </a>
  
    <nav class="md-nav" aria-label="002">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aligned-cuboid-buildings" class="md-nav__link">
    Aligned cuboid buildings
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#output-space-time-averaged-profiles" class="md-nav__link">
    Output: space-time averaged profiles
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#non-neutral-simulations" class="md-nav__link">
    Non-neutral simulations
  </a>
  
    <nav class="md-nav" aria-label="Non-neutral simulations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#101" class="md-nav__link">
    101
  </a>
  
    <nav class="md-nav" aria-label="101">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#infinite-canyon-buildings" class="md-nav__link">
    Infinite canyon buildings
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#output-space-averaged-along-y" class="md-nav__link">
    Output: space-averaged along y
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#volume-flow-rate-forcing-in-x" class="md-nav__link">
    Volume flow rate forcing in x
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#temperature" class="md-nav__link">
    Temperature
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#isothermal-bc-for-temperature" class="md-nav__link">
    Isothermal BC for temperature
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#passive-scalars-line-source" class="md-nav__link">
    Passive scalars line source
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#output-instantaneous-fields-for-temperature-and-scalars" class="md-nav__link">
    Output: instantaneous fields for temperature and scalars
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#102" class="md-nav__link">
    102
  </a>
  
    <nav class="md-nav" aria-label="102">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#prerequisites-for-warmstart-simulation" class="md-nav__link">
    Prerequisites for warmstart simulation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#staggered-cuboid-buildings" class="md-nav__link">
    Staggered cuboid buildings
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#volume-flow-rate-forcing-in-x-and-y" class="md-nav__link">
    Volume flow rate forcing in x and y
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#constant-thermal-flux-bc-for-temperature" class="md-nav__link">
    Constant thermal flux BC for temperature
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#passive-scalars-point-source" class="md-nav__link">
    Passive scalars point source
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scalar-inflow-outflow-bc" class="md-nav__link">
    Scalar inflow-outflow BC
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#warmstart" class="md-nav__link">
    Warmstart
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#coldstart" class="md-nav__link">
    Coldstart
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#energy-balance-simulation" class="md-nav__link">
    Energy balance simulation
  </a>
  
    <nav class="md-nav" aria-label="Energy balance simulation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#201" class="md-nav__link">
    201
  </a>
  
    <nav class="md-nav" aria-label="201">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pre-defined-buildings" class="md-nav__link">
    Pre-defined buildings
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#grid-stretching-in-z" class="md-nav__link">
    Grid-stretching in z
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#output-time-averaged-fields" class="md-nav__link">
    Output: time averaged fields
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#energy-balance" class="md-nav__link">
    Energy Balance
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#moisture" class="md-nav__link">
    Moisture
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#coriolis-forcing-and-nudging" class="md-nav__link">
    Coriolis forcing and nudging
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#driver-simulation" class="md-nav__link">
    Driver simulation
  </a>
  
    <nav class="md-nav" aria-label="Driver simulation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#501" class="md-nav__link">
    501
  </a>
  
    <nav class="md-nav" aria-label="501">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#driverprecursor-simulation" class="md-nav__link">
    Driver/precursor simulation
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#502" class="md-nav__link">
    502
  </a>
  
    <nav class="md-nav" aria-label="502">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#prerequisites-simulation-with-external-forcing" class="md-nav__link">
    Prerequisites simulation with external forcing
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#buildings-from-lidar-image" class="md-nav__link">
    Buildings from LIDAR image
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#driven-simulation" class="md-nav__link">
    Driven simulation
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <!-- omit in toc -->
<h1 id="example-simulations">Example simulations<a class="headerlink" href="#example-simulations" title="Permanent link">&para;</a></h1>
<p>uDALES simulates a large variety of urban case studies. Here we showcase a few examples (<a href="#list-of-examples">List of examples</a>) with different atmospheric stabilities and various setups (overview in <a href="#main-simulation-set-up-options">Table 1</a>) to help you get started. The setups are in the <code>namoptions</code> file of your simulation.</p>
<p>Note that we limited the simulation time to just a few minutes for demonstration, if you are looking to conduct realistic simulations, you need a much longer simulation time. If you wish to run all examples automatically and plot inputs and outputs as shown in this guide, follow the instructions detailed in the  <a href="https://github.com/uDALES/u-dales/blob/master/DEVELOP.md">development notes</a> instead.</p>
<!-- omit in toc -->
<h2 id="prerequisites">Prerequisites<a class="headerlink" href="#prerequisites" title="Permanent link">&para;</a></h2>
<p>All examples below assume that you have installed uDALES as per our <a href="../udales-getting-started/">getting started guide</a>.</p>
<p>Set up the paths and variables for running the simulation, for example with the following:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># We assume you are running the following commands from your</span>
<span class="c1"># top-level project directory.</span>

<span class="nb">export</span> <span class="nv">DA_TOOLSDIR</span><span class="o">=</span><span class="k">$(</span><span class="nb">pwd</span><span class="k">)</span>/u-dales/tools <span class="c1"># Directory of scripts</span>
<span class="nb">export</span> <span class="nv">DA_BUILD</span><span class="o">=</span><span class="k">$(</span><span class="nb">pwd</span><span class="k">)</span>/u-dales/build/release/u-dales <span class="c1"># Build file</span>
<span class="nb">export</span> <span class="nv">NCPU</span><span class="o">=</span><span class="m">2</span> <span class="c1"># Number of CPUs to use for a simulation</span>
<span class="nb">export</span> <span class="nv">DA_WORKDIR</span><span class="o">=</span><span class="k">$(</span><span class="nb">pwd</span><span class="k">)</span>/outputs <span class="c1"># Output top-level directory</span>
</code></pre></div>
<!-- omit in toc -->
<h2 id="run">Run<a class="headerlink" href="#run" title="Permanent link">&para;</a></h2>
<p>Example cases are located under <code>u-dales/examples</code>.</p>
<p>All examples are run using the following command:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># We assume you are running the following commands from your</span>
<span class="c1"># top-level project directory.</span>

<span class="c1"># General syntax: local_execute.sh exp_directory</span>
./u-dales/tools/local_execute.sh u-dales/examples/001
</code></pre></div>
<!-- omit in toc -->
<h2 id="customising-simulations">Customising simulations<a class="headerlink" href="#customising-simulations" title="Permanent link">&para;</a></h2>
<p>If you want to make any changes to the example simulations, e.g. changing the domain size, follow the <a href="./udales-getting-started.md/#set-up">set-up steps</a> in the getting started guide to obtain a copy of the simulation setup and make the changes to your copy of the setup. You may need to run some pre-processing steps (see <a href="../udales-pre-processing/">Pre-processing</a>) before running the simulation. These cases are indicated as such in <a href="#main-simulation-set-up-options">Table 1</a>.</p>
<!-- omit in toc -->
<h2 id="main-simulation-set-up-options">Main simulation set-up options<a class="headerlink" href="#main-simulation-set-up-options" title="Permanent link">&para;</a></h2>
<p>Below is a list of common setups and options for urban case studies. A complete list of all options available with uDALES can be found in the <a href="../udales-namoptions-overview/">Configuration</a> document.</p>
<p>Table 1: Main setups of urban case studies and reference example simulation(s).</p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Setting</th>
<th>Requires pre-processing</th>
<th>Example simulation</th>
</tr>
</thead>
<tbody>
<tr>
<td>Domain</td>
<td>size and resolution</td>
<td>yes</td>
<td>all</td>
</tr>
<tr>
<td>Domain</td>
<td>equidistant grid</td>
<td>yes</td>
<td>001, 002, 101, 102, 501, 502</td>
</tr>
<tr>
<td>Domain</td>
<td>stretched z-grid</td>
<td>yes</td>
<td>201</td>
</tr>
<tr>
<td>Domain</td>
<td>warmstart</td>
<td>no</td>
<td>102</td>
</tr>
<tr>
<td>Morphology</td>
<td>no buildings</td>
<td>yes</td>
<td>001</td>
</tr>
<tr>
<td>Morphology</td>
<td>infinite canyon builings</td>
<td>yes</td>
<td>101</td>
</tr>
<tr>
<td>Morphology</td>
<td>aligned cuboid buildings</td>
<td>yes</td>
<td>002, 501</td>
</tr>
<tr>
<td>Morphology</td>
<td>staggered cuboid buildings</td>
<td>yes</td>
<td>102</td>
</tr>
<tr>
<td>Morphology</td>
<td>pre-defined buildings</td>
<td>yes</td>
<td>201</td>
</tr>
<tr>
<td>Morphology</td>
<td>LIDAR-image buildings</td>
<td>yes</td>
<td>502</td>
</tr>
<tr>
<td>Forcing</td>
<td>pressure gradient</td>
<td>yes</td>
<td>001</td>
</tr>
<tr>
<td>Forcing</td>
<td>volume flow rate</td>
<td>no</td>
<td>101, 102, 501</td>
</tr>
<tr>
<td>Forcing</td>
<td>outflow rate</td>
<td>no</td>
<td>--</td>
</tr>
<tr>
<td>Forcing</td>
<td>free stream velocity</td>
<td>no</td>
<td>--</td>
</tr>
<tr>
<td>Forcing</td>
<td>Coriolis and nudging</td>
<td>yes</td>
<td>201</td>
</tr>
<tr>
<td>Forcing</td>
<td>driving data</td>
<td>no</td>
<td>502</td>
</tr>
<tr>
<td>Lateral momentum boundary conditions (BCs)</td>
<td>periodic</td>
<td>no</td>
<td>001, 002, 101, 102, 201, 501</td>
</tr>
<tr>
<td>Lateral momentum BCs</td>
<td>driving data</td>
<td>no</td>
<td>502</td>
</tr>
<tr>
<td>Passive scalar source</td>
<td>point source</td>
<td>no</td>
<td>102</td>
</tr>
<tr>
<td>Passive scalar source</td>
<td>line source</td>
<td>no</td>
<td>101</td>
</tr>
<tr>
<td>Passive scalar source</td>
<td>source network</td>
<td>no</td>
<td>--</td>
</tr>
<tr>
<td>Lateral scalar BCs</td>
<td>periodic</td>
<td>no</td>
<td>101, 501</td>
</tr>
<tr>
<td>Lateral scalar BCs</td>
<td>inflow-outflow</td>
<td>no</td>
<td>102</td>
</tr>
<tr>
<td>Surface and top scalar BCs</td>
<td>zero flux</td>
<td>no</td>
<td>--</td>
</tr>
<tr>
<td>Surface and top scalar BCs</td>
<td>constant flux</td>
<td>no</td>
<td>102</td>
</tr>
<tr>
<td>Surface and top scalar BCs</td>
<td>isothermal</td>
<td>no</td>
<td>101, 501</td>
</tr>
<tr>
<td>Surface and top scalar BCs</td>
<td>energy balance</td>
<td>yes</td>
<td>201</td>
</tr>
<tr>
<td>Output</td>
<td>instantaneous fields</td>
<td>no</td>
<td>001, 101, 102, 201, 502</td>
</tr>
<tr>
<td>Output</td>
<td>time-averaged fields</td>
<td>no</td>
<td>201, 502</td>
</tr>
<tr>
<td>Output</td>
<td>space-averaged (along y) fields</td>
<td>no</td>
<td>101</td>
</tr>
<tr>
<td>Output</td>
<td>space-averaged (along x,y) profiles</td>
<td>no</td>
<td>002, 102, 201, 501, 502</td>
</tr>
</tbody>
</table>
<!-- omit in toc -->
<h2 id="list-of-examples">List of examples<a class="headerlink" href="#list-of-examples" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="#standard-simulation-setup">Standard simulation setup</a></li>
<li><a href="#neutral-simulations">Neutral simulations</a></li>
<li><a href="#001">001</a><ul>
<li><a href="#no-buildings-bottom-surface-roughness">No buildings, bottom surface roughness</a></li>
<li><a href="#constant-pressure-gradient">Constant pressure gradient</a></li>
<li><a href="#output-instantaneous-fields">Output: instantaneous fields</a></li>
</ul>
</li>
<li><a href="#002">002</a><ul>
<li><a href="#aligned-cuboid-buildings">Aligned cuboid buildings</a></li>
<li><a href="#output-space-time-averaged-profiles">Output: space-time averaged profiles</a></li>
</ul>
</li>
<li><a href="#non-neutral-simulations">Non-neutral simulations</a></li>
<li><a href="#101">101</a><ul>
<li><a href="#infinite-canyon-buildings">Infinite canyon buildings</a></li>
<li><a href="#output-space-averaged-along-y">Output: space-averaged along y</a></li>
<li><a href="#volume-flow-rate-forcing-in-x">Volume flow rate forcing in x</a></li>
<li><a href="#temperature">Temperature</a></li>
<li><a href="#isothermal-bc-for-temperature">Isothermal BC for temperature</a></li>
<li><a href="#passive-scalars-line-source">Passive scalars line source</a></li>
<li><a href="#output-instantaneous-fields-for-temperature-and-scalars">Output: instantaneous fields for temperature and scalars</a></li>
</ul>
</li>
<li><a href="#102">102</a><ul>
<li><a href="#prerequisites-for-warmstart-simulation">Prerequisites for warmstart simulation</a></li>
<li><a href="#staggered-cuboid-buildings">Staggered cuboid buildings</a></li>
<li><a href="#volume-flow-rate-forcing-in-x-and-y">Volume flow rate forcing in x and y</a></li>
<li><a href="#constant-thermal-flux-bc-for-temperature">Constant thermal flux BC for temperature</a></li>
<li><a href="#passive-scalars-point-source">Passive scalars point source</a></li>
<li><a href="#scalar-inflow-outflow-bc">Scalar inflow-outflow BC</a></li>
<li><a href="#warmstart">Warmstart</a></li>
<li><a href="#coldstart">Coldstart</a></li>
</ul>
</li>
<li><a href="#energy-balance-simulation">Energy balance simulation</a></li>
<li><a href="#201">201</a><ul>
<li><a href="#pre-defined-buildings">Pre-defined buildings</a></li>
<li><a href="#grid-stretching-in-z">Grid-stretching in z</a></li>
<li><a href="#output-time-averaged-fields">Output: time averaged fields</a></li>
<li><a href="#energy-balance">Energy Balance</a></li>
<li><a href="#moisture">Moisture</a></li>
<li><a href="#coriolis-forcing-and-nudging">Coriolis forcing and nudging</a></li>
</ul>
</li>
<li><a href="#driver-simulation">Driver simulation</a></li>
<li><a href="#501">501</a><ul>
<li><a href="#driverprecursor-simulation">Driver/precursor simulation</a></li>
</ul>
</li>
<li><a href="#502">502</a><ul>
<li><a href="#prerequisites-simulation-with-external-forcing">Prerequisites simulation with external forcing</a></li>
<li><a href="#buildings-from-lidar-image">Buildings from LIDAR image</a></li>
<li><a href="#driven-simulation">Driven simulation</a></li>
</ul>
</li>
</ul>
<h2 id="standard-simulation-setup">Standard simulation setup<a class="headerlink" href="#standard-simulation-setup" title="Permanent link">&para;</a></h2>
<p>The below setups are required for any type of simulation.
The simulation domain varies amongst the example simulations and is set-up for example by</p>
<div class="highlight"><pre><span></span><code><span class="p">&amp;</span><span class="n">DOMAIN</span>
<span class="n">imax</span>         <span class="o">=</span> <span class="mi">64</span>
<span class="n">jtot</span>         <span class="o">=</span> <span class="mi">64</span>
<span class="n">kmax</span>         <span class="o">=</span> <span class="mi">64</span>
<span class="n">xsize</span>        <span class="o">=</span> <span class="mi">64</span>
<span class="n">ysize</span>        <span class="o">=</span> <span class="mi">64</span>
<span class="p">&amp;</span><span class="n">INPS</span>
<span class="n">zsize</span>        <span class="o">=</span> <span class="mi">64</span>
</code></pre></div>
<p>We also set an initial profile for u-wind velocity (and other variables if they are used) of e.g. u = 2 m/s by</p>
<div class="highlight"><pre><span></span><code><span class="p">&amp;</span><span class="n">INPS</span>
<span class="n">u0</span>           <span class="o">=</span> <span class="mf">2.</span>
</code></pre></div>
<p>and add some random perturbations to the initial field, such that turbulence develops faster:</p>
<div class="highlight"><pre><span></span><code><span class="n">randu</span>        <span class="o">=</span> <span class="mf">0.01</span>
</code></pre></div>
<p>Changes in the domain and initial profiles require pre-processing.</p>
<p>Further, we recommend running the simulations with adaptive time-stepping, the Fast-Fourier-Transformation algorithm in the poisson solver (<em>this will become default in the future</em>) and using the Vreman sub-grid model:</p>
<div class="highlight"><pre><span></span><code><span class="p">&amp;</span><span class="n">RUN</span>
<span class="n">ladaptive</span>    <span class="o">=</span> <span class="p">.</span><span class="n">true</span><span class="p">.</span>
<span class="p">&amp;</span><span class="n">DYNAMICS</span>
<span class="n">ipoiss</span>       <span class="o">=</span> <span class="mi">0</span>
<span class="p">&amp;</span><span class="n">NAMSUBGRID</span>
<span class="n">lvreman</span>      <span class="o">=</span> <span class="p">.</span><span class="n">true</span><span class="p">.</span>
</code></pre></div>
<p>Further information on these parameters is in the <a href="../udales-namoptions-overview/">Namoptions overview</a>, and more on the required pre-processing steps is found in <a href="../udales-pre-processing/">Pre-processing</a>.</p>
<h2 id="neutral-simulations">Neutral simulations<a class="headerlink" href="#neutral-simulations" title="Permanent link">&para;</a></h2>
<h3 id="001">001<a class="headerlink" href="#001" title="Permanent link">&para;</a></h3>
<h4 id="no-buildings-bottom-surface-roughness">No buildings, bottom surface roughness<a class="headerlink" href="#no-buildings-bottom-surface-roughness" title="Permanent link">&para;</a></h4>
<p>This simulation does not contain any buildings. Therefore we need to set:</p>
<div class="highlight"><pre><span></span><code><span class="p">&amp;</span><span class="n">INPS</span>
<span class="n">lflat</span>        <span class="o">=</span> <span class="p">.</span><span class="n">true</span><span class="p">.</span>
<span class="p">&amp;</span><span class="n">WALLS</span>
<span class="n">nfcts</span>        <span class="o">=</span> <span class="mi">0</span>
</code></pre></div>
<p>A rough surface at the bottom is simulated by setting the following parameters:</p>
<div class="highlight"><pre><span></span><code><span class="p">&amp;</span><span class="n">BC</span>
<span class="n">wtsurf</span>       <span class="o">=</span> <span class="mf">0.</span>
<span class="n">wqsurf</span>       <span class="o">=</span> <span class="mf">0.</span>
<span class="n">thls</span>         <span class="o">=</span> <span class="mi">28</span><span class="mf">8.</span>
<span class="n">z0</span>           <span class="o">=</span> <span class="mf">0.01</span>
<span class="n">z0h</span>          <span class="o">=</span> <span class="mf">0.000067</span>
</code></pre></div>
<p>where <code>z0</code> is the roughness length for momentum. Note that even though this is a neutral simulation, all of these parameters need to be specified to reasonable values.
The simulation uses periodic lateral boundary conditions by default.</p>
<h4 id="constant-pressure-gradient">Constant pressure gradient<a class="headerlink" href="#constant-pressure-gradient" title="Permanent link">&para;</a></h4>
<p>A constant pressure gradient in x is set by</p>
<div class="highlight"><pre><span></span><code><span class="p">&amp;</span><span class="n">INPS</span>
<span class="n">dpdx</span>         <span class="o">=</span> <span class="mf">0.0001</span>
</code></pre></div>
<h4 id="output-instantaneous-fields">Output: instantaneous fields<a class="headerlink" href="#output-instantaneous-fields" title="Permanent link">&para;</a></h4>
<p>The simulation output contains the 3D instantaneous fields of u, v, and w. The output is produced after every 10 seconds of simulation runtime. We specify this by setting:</p>
<div class="highlight"><pre><span></span><code><span class="p">&amp;</span><span class="n">OUTPUT</span>
<span class="n">lfielddump</span>   <span class="o">=</span> <span class="p">.</span><span class="n">true</span><span class="p">.</span>
<span class="n">fieldvars</span>    <span class="o">=</span> <span class="s1">&#39;u0,v0,w0&#39;</span>
<span class="n">tfielddump</span>   <span class="o">=</span> <span class="mi">1</span><span class="mf">0.</span>
</code></pre></div>
<h3 id="002">002<a class="headerlink" href="#002" title="Permanent link">&para;</a></h3>
<p><img alt="blocks.002" src="../assets/images/blocks.002.png" /></p>
<p>This simulation has a similar setup to <code>001</code> and additionally contains buildings.</p>
<h4 id="aligned-cuboid-buildings">Aligned cuboid buildings<a class="headerlink" href="#aligned-cuboid-buildings" title="Permanent link">&para;</a></h4>
<p>The simulation contains aligned cube-shaped buildings, which can be automatically added by the pre-processing by setting:</p>
<div class="highlight"><pre><span></span><code><span class="p">&amp;</span><span class="n">INPS</span>
<span class="n">lcube</span>        <span class="o">=</span> <span class="p">.</span><span class="n">true</span><span class="p">.</span>
<span class="n">blockheight</span>  <span class="o">=</span> <span class="mi">16</span>
<span class="n">blockwidth</span>   <span class="o">=</span> <span class="mi">16</span>
<span class="n">canyonwidth</span>  <span class="o">=</span> <span class="mi">16</span>
</code></pre></div>
<p>The corresponding number of blocks (including blocks on the floor) and block facets are (these are updated automatically by the preprocessing routine):</p>
<div class="highlight"><pre><span></span><code><span class="p">&amp;</span><span class="n">WALLS</span>
<span class="n">nblocks</span>      <span class="o">=</span> <span class="mi">17</span>
<span class="n">nfcts</span>        <span class="o">=</span> <span class="mi">33</span>
</code></pre></div>
<h4 id="output-space-time-averaged-profiles">Output: space-time averaged profiles<a class="headerlink" href="#output-space-time-averaged-profiles" title="Permanent link">&para;</a></h4>
<p>The simulation output contains 1D space-averaged and space-time-averaged vertical profiles. The output is produced after every 10 seconds of simulation runtime and the time-average uses a sample time step of 1 second. We specify this by setting:</p>
<div class="highlight"><pre><span></span><code><span class="p">&amp;</span><span class="n">OUTPUT</span>
<span class="n">lxydump</span>      <span class="o">=</span> <span class="p">.</span><span class="n">true</span><span class="p">.</span>
<span class="n">lxytdump</span>     <span class="o">=</span> <span class="p">.</span><span class="n">true</span><span class="p">.</span>
<span class="n">tstatsdump</span>   <span class="o">=</span> <span class="mi">1</span><span class="mf">0.</span>
<span class="n">tsample</span>      <span class="o">=</span> <span class="mf">1.</span>
</code></pre></div>
<h2 id="non-neutral-simulations">Non-neutral simulations<a class="headerlink" href="#non-neutral-simulations" title="Permanent link">&para;</a></h2>
<h3 id="101">101<a class="headerlink" href="#101" title="Permanent link">&para;</a></h3>
<p><img alt="blocks.101" src="../assets/images/blocks.101.png" /></p>
<h4 id="infinite-canyon-buildings">Infinite canyon buildings<a class="headerlink" href="#infinite-canyon-buildings" title="Permanent link">&para;</a></h4>
<p>This simulation has "infinite canyons" along the y-axis as buildings. We set this by using</p>
<div class="highlight"><pre><span></span><code><span class="p">&amp;</span><span class="n">INPS</span>
<span class="n">lcanyons</span>     <span class="o">=</span> <span class="p">.</span><span class="n">true</span><span class="p">.</span>
<span class="n">blockheight</span>  <span class="o">=</span> <span class="mi">16</span>
<span class="n">blockwidth</span>   <span class="o">=</span> <span class="mi">16</span>
<span class="n">canyonwidth</span>  <span class="o">=</span> <span class="mi">16</span>
</code></pre></div>
<h4 id="output-space-averaged-along-y">Output: space-averaged along y<a class="headerlink" href="#output-space-averaged-along-y" title="Permanent link">&para;</a></h4>
<p>Because there is no change in building geometry along y, it makes sense to look at the 2D statistics space-averaged along the y direction (with and without time-averaging):</p>
<div class="highlight"><pre><span></span><code><span class="p">&amp;</span><span class="n">OUTPUT</span>
<span class="n">lydump</span>       <span class="o">=</span> <span class="p">.</span><span class="n">true</span><span class="p">.</span>
<span class="n">lytdump</span>      <span class="o">=</span> <span class="p">.</span><span class="n">true</span><span class="p">.</span>
</code></pre></div>
<h4 id="volume-flow-rate-forcing-in-x">Volume flow rate forcing in x<a class="headerlink" href="#volume-flow-rate-forcing-in-x" title="Permanent link">&para;</a></h4>
<p>The simulation is driven by a fixed volume-flow rate forcing, which prescribes the domain-average velocity of u = 1.5 m/s:</p>
<div class="highlight"><pre><span></span><code><span class="p">&amp;</span><span class="n">PHYSICS</span>
<span class="n">luvolflowr</span>   <span class="o">=</span> <span class="p">.</span><span class="n">true</span><span class="p">.</span>
<span class="n">uflowrate</span>    <span class="o">=</span> <span class="mf">1.5</span>
</code></pre></div>
<h4 id="temperature">Temperature<a class="headerlink" href="#temperature" title="Permanent link">&para;</a></h4>
<p>The simulation also considers changes in temperature. We therefore need to set</p>
<div class="highlight"><pre><span></span><code><span class="p">&amp;</span><span class="n">PHYSICS</span>
<span class="n">lbuoyancy</span>    <span class="o">=</span> <span class="p">.</span><span class="n">true</span><span class="p">.</span>
<span class="n">ltempeq</span>      <span class="o">=</span> <span class="p">.</span><span class="n">true</span><span class="p">.</span>
</code></pre></div>
<p>set an initial temperature profile (using the surface temperature <code>thl0</code> and the default lapse rate)</p>
<div class="highlight"><pre><span></span><code><span class="p">&amp;</span><span class="n">INPS</span>
<span class="n">thl0</span>         <span class="o">=</span> <span class="mi">29</span><span class="mf">0.</span>
</code></pre></div>
<p>and specify the advection scheme for temperature:</p>
<div class="highlight"><pre><span></span><code><span class="p">&amp;</span><span class="n">DYNAMICS</span>
<span class="n">iadv_thl</span>     <span class="o">=</span> <span class="mi">2</span>
</code></pre></div>
<h4 id="isothermal-bc-for-temperature">Isothermal BC for temperature<a class="headerlink" href="#isothermal-bc-for-temperature" title="Permanent link">&para;</a></h4>
<p>The temperature on the facets is set by the values in <code>Tfacinit.f90</code> (288 K in this case). These temperatures do not change as the energy balance is not used as a default (<code>lEB = .false.</code>). A fixed temperature at the the top of the domain (<code>thl_top</code>) is set by</p>
<div class="highlight"><pre><span></span><code><span class="p">&amp;</span><span class="n">BC</span>
<span class="n">thl_top</span>      <span class="o">=</span> <span class="mi">28</span><span class="mf">5.</span>
<span class="n">BCtopT</span>       <span class="o">=</span> <span class="mi">2</span>
</code></pre></div>
<p>The temperature flux between the building walls and surrounding air is determined by wall functions:</p>
<div class="highlight"><pre><span></span><code><span class="p">&amp;</span><span class="n">WALLS</span>
<span class="n">iwalltemp</span>    <span class="o">=</span> <span class="mi">2</span>
</code></pre></div>
<h4 id="passive-scalars-line-source">Passive scalars line source<a class="headerlink" href="#passive-scalars-line-source" title="Permanent link">&para;</a></h4>
<p>A passive scalar line source is set by</p>
<div class="highlight"><pre><span></span><code><span class="p">&amp;</span><span class="n">SCALARS</span>
<span class="n">nsv</span>          <span class="o">=</span> <span class="mi">1</span>
<span class="n">lscasrcl</span>     <span class="o">=</span> <span class="p">.</span><span class="n">true</span><span class="p">.</span>
<span class="n">SS</span>           <span class="o">=</span> <span class="mf">1.</span>
<span class="n">sigS</span>         <span class="o">=</span> <span class="mf">0.5</span>
</code></pre></div>
<p>and by specifying the scalar advection scheme:</p>
<div class="highlight"><pre><span></span><code><span class="p">&amp;</span><span class="n">DYNAMICS</span>
<span class="n">iadv_sv</span>      <span class="o">=</span> <span class="mi">7</span>
</code></pre></div>
<h4 id="output-instantaneous-fields-for-temperature-and-scalars">Output: instantaneous fields for temperature and scalars<a class="headerlink" href="#output-instantaneous-fields-for-temperature-and-scalars" title="Permanent link">&para;</a></h4>
<p>We added the temperature and scalar concentration to the instantaneous fields:</p>
<div class="highlight"><pre><span></span><code><span class="p">&amp;</span><span class="n">OUTPUT</span>
<span class="n">fieldvars</span>    <span class="o">=</span> <span class="s1">&#39;u0,v0,w0,th,s1&#39;</span>
</code></pre></div>
<h3 id="102">102<a class="headerlink" href="#102" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th align="center">Domain</th>
<th align="center">Output slice</th>
<th align="center">3D output</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><img alt="blocks.102" src="../assets/images/blocks.102.png" /></td>
<td align="center"><img alt="102 outputs" src="../assets/images/fielddump_slice_2D.102.png" /></td>
<td align="center"><img alt="102 outputs" src="../assets/images/fielddump_slice_3D.102.png" /></td>
</tr>
</tbody>
</table>
<p>The basic setup of this simulation is similar to <code>101</code>.</p>
<h4 id="prerequisites-for-warmstart-simulation">Prerequisites for warmstart simulation<a class="headerlink" href="#prerequisites-for-warmstart-simulation" title="Permanent link">&para;</a></h4>
<p>The simulation is continued from a previous simulation with a similar setup. The restart files (<code>initd</code> and <code>inits</code> for scalars) containing all relevant field data is saved in the example directory.
The restart files are currently not included in the directory and can be downloaded <a href="https://www.dropbox.com/sh/20rsgpt0gh09gr7/AABuoCFtn6_zFTxx4k8pKqvLa?dl=1">examples_warmstart_102.zip</a> or from the command line (Linux/macOS) with</p>
<div class="highlight"><pre><span></span><code><span class="c1"># From top-level project directory.</span>

<span class="c1"># Download required files</span>
<span class="nb">pushd</span> u-dales/examples/102/
curl -o examples_warmstart_102.zip -L https://www.dropbox.com/sh/20rsgpt0gh09gr7/AABuoCFtn6_zFTxx4k8pKqvLa?dl<span class="o">=</span><span class="m">1</span>
unzip examples_warmstart_102.zip
<span class="nb">popd</span>
</code></pre></div>
<p>A warmstart simulation is required to have the same basic setup as the simulation is based on, including the numbers of CPUs it is run with. The example warmstart files are run on two CPUs, therefore this simulation will also require two CPUs.
An alternative to running this simulation based on the previous output is described under <a href="#Coldstart">Coldstart</a>.</p>
<h4 id="staggered-cuboid-buildings">Staggered cuboid buildings<a class="headerlink" href="#staggered-cuboid-buildings" title="Permanent link">&para;</a></h4>
<p>The simulation has staggered cuboid buildings, which can be set up using</p>
<div class="highlight"><pre><span></span><code><span class="p">&amp;</span><span class="n">INPS</span>
<span class="n">lstaggered</span>   <span class="o">=</span> <span class="p">.</span><span class="n">true</span><span class="p">.</span>
</code></pre></div>
<h4 id="volume-flow-rate-forcing-in-x-and-y">Volume flow rate forcing in x and y<a class="headerlink" href="#volume-flow-rate-forcing-in-x-and-y" title="Permanent link">&para;</a></h4>
<p>The simulation is driven by a fixed volume-flow rate forcing for u and v:</p>
<div class="highlight"><pre><span></span><code><span class="p">&amp;</span><span class="n">PHYSICS</span>
<span class="n">luvolflowr</span>   <span class="o">=</span> <span class="p">.</span><span class="n">true</span><span class="p">.</span>
<span class="n">uflowrate</span>    <span class="o">=</span> <span class="mf">1.5</span>
<span class="n">lvvolflowr</span>   <span class="o">=</span> <span class="p">.</span><span class="n">true</span><span class="p">.</span>
<span class="n">vflowrate</span>    <span class="o">=</span> <span class="mf">0.3</span>
</code></pre></div>
<h4 id="constant-thermal-flux-bc-for-temperature">Constant thermal flux BC for temperature<a class="headerlink" href="#constant-thermal-flux-bc-for-temperature" title="Permanent link">&para;</a></h4>
<p>The temperature is determined by a constant thermal flux from the roads, building roofs and the top of the domain (<code>iwalltemp = 1</code> by default):</p>
<div class="highlight"><pre><span></span><code><span class="p">&amp;</span><span class="n">BC</span>
<span class="n">wtsurf</span>       <span class="o">=</span> <span class="o">-</span><span class="mf">0.01</span>
<span class="n">wttop</span>        <span class="o">=</span> <span class="o">-</span><span class="mf">0.01</span>
<span class="n">bctfz</span>        <span class="o">=</span> <span class="o">-</span><span class="mf">0.01</span>
</code></pre></div>
<h4 id="passive-scalars-point-source">Passive scalars point source<a class="headerlink" href="#passive-scalars-point-source" title="Permanent link">&para;</a></h4>
<p>The simulation contains a scalar field with a scalar point source:</p>
<div class="highlight"><pre><span></span><code><span class="p">&amp;</span><span class="n">SCALARS</span>
<span class="n">lscasrc</span>      <span class="o">=</span> <span class="p">.</span><span class="n">true</span><span class="p">.</span>
<span class="n">SS</span>           <span class="o">=</span> <span class="mf">1.</span>
<span class="n">sigS</span>         <span class="o">=</span> <span class="mf">0.5</span>
<span class="n">xS</span>           <span class="o">=</span> <span class="mf">4.</span>
<span class="n">yS</span>           <span class="o">=</span> <span class="mf">8.</span>
<span class="n">zS</span>           <span class="o">=</span> <span class="mf">3.</span>
</code></pre></div>
<h4 id="scalar-inflow-outflow-bc">Scalar inflow-outflow BC<a class="headerlink" href="#scalar-inflow-outflow-bc" title="Permanent link">&para;</a></h4>
<p>The scalar concentration is not determined by periodic boundary conditions like momentum and temperature, but leaves the domain at the outflow plane:</p>
<div class="highlight"><pre><span></span><code><span class="p">&amp;</span><span class="n">BC</span>
<span class="n">BCxs</span>         <span class="o">=</span> <span class="mi">2</span>
</code></pre></div>
<p>The inlet profile is determined by the profile found in <code>scalar.inp.102</code> (defaults to 0. if unspecified)</p>
<h4 id="warmstart">Warmstart<a class="headerlink" href="#warmstart" title="Permanent link">&para;</a></h4>
<p>A warmstart simulation requires setting</p>
<div class="highlight"><pre><span></span><code><span class="p">&amp;</span><span class="n">RUN</span>
<span class="n">lwarmstart</span>   <span class="o">=</span> <span class="p">.</span><span class="n">true</span><span class="p">.</span>
<span class="n">startfile</span>    <span class="o">=</span> <span class="s1">&#39;initd00003172_xxx.102&#39;</span>
</code></pre></div>
<p>where the name of the <code>startfile</code> needs to match the name of the restart files (xxx instead of processor number).</p>
<p>For a warmstart containing scalar concentration fields you need to additionally set</p>
<div class="highlight"><pre><span></span><code><span class="p">&amp;</span><span class="n">SCALARS</span>
<span class="n">lreadscal</span>    <span class="o">=</span> <span class="p">.</span><span class="n">true</span><span class="p">.</span>
</code></pre></div>
<h4 id="coldstart">Coldstart<a class="headerlink" href="#coldstart" title="Permanent link">&para;</a></h4>
<p>This describes an alternative, if the warmstart files are not available.
Run the simulation with recommended runtime of &gt;= 1000 s and save the restart files by setting the restart time accordingly:</p>
<div class="highlight"><pre><span></span><code><span class="p">&amp;</span><span class="n">RUN</span>
<span class="n">lwarmstart</span>   <span class="o">=</span> <span class="p">.</span><span class="n">false</span><span class="p">.</span>
<span class="n">runtime</span>      <span class="o">=</span> <span class="mi">100</span><span class="mf">1.</span>
<span class="n">trestart</span>     <span class="o">=</span> <span class="mi">100</span><span class="mf">0.</span>
</code></pre></div>
<p>Then, change the switches as described above, and make sure <code>startfile</code> matches the name of your restart files.</p>
<h2 id="energy-balance-simulation">Energy balance simulation<a class="headerlink" href="#energy-balance-simulation" title="Permanent link">&para;</a></h2>
<h3 id="201">201<a class="headerlink" href="#201" title="Permanent link">&para;</a></h3>
<p><img alt="blocks.201" src="../assets/images/blocks.201.png" /></p>
<h4 id="pre-defined-buildings">Pre-defined buildings<a class="headerlink" href="#pre-defined-buildings" title="Permanent link">&para;</a></h4>
<p>The buildings are read in by a file containing the block geometries:</p>
<div class="highlight"><pre><span></span><code><span class="p">&amp;</span><span class="n">INPS</span>
<span class="n">lblocksfile</span>  <span class="o">=</span> <span class="p">.</span><span class="n">true</span><span class="p">.</span>
<span class="n">blocksfile</span>   <span class="o">=</span> <span class="n">buildings</span><span class="p">.</span><span class="mi">201</span>
</code></pre></div>
<h4 id="grid-stretching-in-z">Grid-stretching in z<a class="headerlink" href="#grid-stretching-in-z" title="Permanent link">&para;</a></h4>
<p>The vertical grid resolution is stretched by setting up the following parameters:</p>
<div class="highlight"><pre><span></span><code><span class="p">&amp;</span><span class="n">INPS</span>
<span class="n">zsize</span>        <span class="o">=</span> <span class="mi">160</span>
<span class="n">lzstretch</span>    <span class="o">=</span> <span class="p">.</span><span class="n">true</span><span class="p">.</span>
<span class="n">stretchconst</span> <span class="o">=</span> <span class="mf">0.01</span>
<span class="n">lstretchexp</span>  <span class="o">=</span> <span class="p">.</span><span class="n">true</span><span class="p">.</span>
<span class="n">hlin</span>         <span class="o">=</span> <span class="mi">40</span>
<span class="n">dzlin</span>        <span class="o">=</span> <span class="mi">1</span>
</code></pre></div>
<p><code>zsize</code> is an initial target value for the final domain height and <code>hlin</code> determines how many non-stretched grid cells there are at the lower end of the domain. Make sure to always use non-stretched grid cells wherever buildings are present. <code>dzlin</code> specifies the resolution for the non-stretched grid cells. <code>lstretchexp</code> specifies the exponential grid stretching function to be used.</p>
<h4 id="output-time-averaged-fields">Output: time averaged fields<a class="headerlink" href="#output-time-averaged-fields" title="Permanent link">&para;</a></h4>
<p>We add 3D output fields that are averaged in time:</p>
<div class="highlight"><pre><span></span><code><span class="p">&amp;</span><span class="n">OUTPUT</span>
<span class="n">ltdump</span>       <span class="o">=</span> <span class="p">.</span><span class="n">true</span><span class="p">.</span>
</code></pre></div>
<h4 id="energy-balance">Energy Balance<a class="headerlink" href="#energy-balance" title="Permanent link">&para;</a></h4>
<p>The simulations solves the surface energy balance.</p>
<div class="highlight"><pre><span></span><code><span class="p">&amp;</span><span class="n">ENERGYBALANCE</span>
<span class="n">lEB</span>          <span class="o">=</span> <span class="p">.</span><span class="n">true</span><span class="p">.</span>
<span class="n">lconstW</span>      <span class="o">=</span> <span class="p">.</span><span class="n">true</span><span class="p">.</span>
<span class="n">dtEB</span>         <span class="o">=</span> <span class="mf">2.</span>
<span class="n">bldT</span>         <span class="o">=</span> <span class="mi">30</span><span class="mf">1.0</span>
<span class="n">wsoil</span>        <span class="o">=</span> <span class="mi">31</span><span class="mf">4.0</span>
<span class="n">wgrmax</span>       <span class="o">=</span> <span class="mi">45</span><span class="mf">1.0</span>
<span class="n">wwilt</span>        <span class="o">=</span> <span class="mi">17</span><span class="mf">2.0</span>
<span class="n">wfc</span>          <span class="o">=</span> <span class="mi">31</span><span class="mf">4.0</span>
<span class="n">skyLW</span>        <span class="o">=</span> <span class="mi">20</span><span class="mf">1.0</span>
<span class="n">GRLAI</span>        <span class="o">=</span> <span class="mf">2.1</span>
<span class="n">rsmin</span>        <span class="o">=</span> <span class="mi">20</span><span class="mf">0.0</span>
</code></pre></div>
<p>For that we also need to use wall functions for temperature and moisture at the building facets:</p>
<div class="highlight"><pre><span></span><code><span class="p">&amp;</span><span class="n">WALLS</span>
<span class="n">iwalltemp</span>    <span class="o">=</span> <span class="mi">2</span>
<span class="n">iwallmoist</span>   <span class="o">=</span> <span class="mi">2</span>
</code></pre></div>
<h4 id="moisture">Moisture<a class="headerlink" href="#moisture" title="Permanent link">&para;</a></h4>
<p>The energybalance contains a latent heat flux and therefore we need to solve the full wet thermodynamics including moisture:</p>
<div class="highlight"><pre><span></span><code><span class="p">&amp;</span><span class="n">PHYSICS</span>
<span class="n">lmoist</span>       <span class="o">=</span> <span class="p">.</span><span class="n">true</span><span class="p">.</span>
</code></pre></div>
<p>The advection scheme for moisture is specified by:</p>
<div class="highlight"><pre><span></span><code><span class="p">&amp;</span><span class="n">DYNAMICS</span>
<span class="n">iadv_qt</span>      <span class="o">=</span> <span class="mi">2</span>
</code></pre></div>
<p>and domain top- values are chosen:</p>
<div class="highlight"><pre><span></span><code><span class="p">&amp;</span><span class="n">BC</span>
<span class="n">qt_top</span>       <span class="o">=</span> <span class="mf">0.0</span>
</code></pre></div>
<h4 id="coriolis-forcing-and-nudging">Coriolis forcing and nudging<a class="headerlink" href="#coriolis-forcing-and-nudging" title="Permanent link">&para;</a></h4>
<p>A coriolis force is specified:</p>
<div class="highlight"><pre><span></span><code><span class="p">&amp;</span><span class="n">PHYSICS</span>
<span class="n">lcoriol</span>      <span class="o">=</span> <span class="p">.</span><span class="n">true</span><span class="p">.</span>
</code></pre></div>
<p>The geostrophic velocity is defined by default as a uniform profile of the initial velocity:</p>
<div class="highlight"><pre><span></span><code><span class="p">&amp;</span><span class="n">INPS</span>
<span class="n">u0</span>           <span class="o">=</span> <span class="mf">1.5</span>
</code></pre></div>
<p>Nudging is applied in the top 64 cells of the domain with a relaxation timescale of 10800 seconds:</p>
<div class="highlight"><pre><span></span><code><span class="p">&amp;</span><span class="n">PHYSICS</span>
<span class="n">lnudge</span>       <span class="o">=</span> <span class="p">.</span><span class="n">true</span><span class="p">.</span>
<span class="n">tnudge</span>       <span class="o">=</span> <span class="mi">1080</span><span class="mf">0.</span>
<span class="n">nnudge</span>       <span class="o">=</span> <span class="mi">64</span>
</code></pre></div>
<h2 id="driver-simulation">Driver simulation<a class="headerlink" href="#driver-simulation" title="Permanent link">&para;</a></h2>
<h3 id="501">501<a class="headerlink" href="#501" title="Permanent link">&para;</a></h3>
<p><img alt="blocks.501" src="../assets/images/blocks.501.png" /></p>
<p>This simulation is similar to <code>101</code> but does not contain any scalars. It is used as the precursor simulation for simulation <code>502</code>.</p>
<h4 id="driverprecursor-simulation">Driver/precursor simulation<a class="headerlink" href="#driverprecursor-simulation" title="Permanent link">&para;</a></h4>
<p>To save the output of a simulation into files that can be read by another simulation as driver-inputs, we set:</p>
<div class="highlight"><pre><span></span><code><span class="p">&amp;</span><span class="n">DRIVER</span>
<span class="n">idriver</span>      <span class="o">=</span> <span class="mi">1</span>
<span class="n">tdriverstart</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">dtdriver</span>     <span class="o">=</span> <span class="mf">0.15</span>
<span class="n">driverstore</span>  <span class="o">=</span> <span class="mi">201</span>
<span class="n">iplane</span>       <span class="o">=</span> <span class="mi">128</span>
</code></pre></div>
<p><code>iplane</code> sets the index of the y-z plane we store (here this is equal to the outlet plane), and <code>(driverstore-1)*dtdriver</code> determines for how long you can run the driven simulation. The time when we start recording the planes should therefore be <code>tdriverstart</code> &lt;= <code>runtime</code> - <code>(driverstore-1)*dtdriver</code>. More information on these parameters is in the documentation on <a href="../udales-simulation-setup/">simulation setup</a>.</p>
<h3 id="502">502<a class="headerlink" href="#502" title="Permanent link">&para;</a></h3>
<p><img alt="blocks.502" src="../assets/images/blocks.502.png" /></p>
<h4 id="prerequisites-simulation-with-external-forcing">Prerequisites simulation with external forcing<a class="headerlink" href="#prerequisites-simulation-with-external-forcing" title="Permanent link">&para;</a></h4>
<p>The driver input files are currently not included in the directory and can be downloaded <a href="https://www.dropbox.com/sh/spld3hqipqe17j1/AAA0cuzW3qc9ftY6dvHcSSL8a?dl=1">examples_driver_501.zip</a> or from the command line (Linux/macOS) with</p>
<div class="highlight"><pre><span></span><code><span class="c1"># From top-level project directory.</span>

<span class="c1"># Download required files</span>
<span class="nb">pushd</span> u-dales/examples/502/
curl -o examples_driver_501.zip -L https://www.dropbox.com/sh/spld3hqipqe17j1/AAA0cuzW3qc9ftY6dvHcSSL8a?dl<span class="o">=</span><span class="m">1</span>
unzip examples_driver_501.zip
<span class="nb">popd</span>
</code></pre></div>
<p>These <code>*driver*</code> files need to be in the same place as the other input files. Alternatively, the <code>*driver*</code> files from simulation 501 can be used by copying them into the directory of 502. For that we recommend to set the <code>runtime</code> to at least 1000 s, and <code>tdriverstart</code> accordingly with <code>tdriverstart</code> &lt;= <code>runtime</code> - <code>(driverstore-1)*dtdriver</code>.</p>
<h4 id="buildings-from-lidar-image">Buildings from LIDAR image<a class="headerlink" href="#buildings-from-lidar-image" title="Permanent link">&para;</a></h4>
<p>The buildings of this simulation are generated from a grey-scale image of the buildings and their heights.</p>
<div class="highlight"><pre><span></span><code><span class="p">&amp;</span><span class="n">INPS</span>
<span class="n">llidar</span>       <span class="o">=</span> <span class="p">.</span><span class="n">true</span><span class="p">.</span>
<span class="n">sourcename</span>   <span class="o">=</span> <span class="n">DAPPLE7</span><span class="p">.</span><span class="n">png</span>
<span class="n">dxinp</span>        <span class="o">=</span> <span class="mi">1</span>
<span class="n">dyinp</span>        <span class="o">=</span> <span class="mi">1</span>
<span class="n">dzinp</span>        <span class="o">=</span> <span class="mi">1</span>
<span class="n">centeri</span>      <span class="o">=</span> <span class="mi">400</span>
<span class="n">centerj</span>      <span class="o">=</span> <span class="mi">400</span>
<span class="n">maxh</span>         <span class="o">=</span> <span class="mi">25</span>
<span class="n">pad</span>          <span class="o">=</span> <span class="mi">3</span>
<span class="n">smallarea</span>    <span class="o">=</span> <span class="mi">150</span>
</code></pre></div>
<h4 id="driven-simulation">Driven simulation<a class="headerlink" href="#driven-simulation" title="Permanent link">&para;</a></h4>
<p>This simulation is forced by the data from the stored outlet plane of simulation <code>501</code>:</p>
<div class="highlight"><pre><span></span><code><span class="p">&amp;</span><span class="n">DRIVER</span>
<span class="n">idriver</span>      <span class="o">=</span> <span class="mi">2</span>
<span class="n">driverjobnr</span>  <span class="o">=</span> <span class="mi">501</span>
<span class="n">driverstore</span>  <span class="o">=</span> <span class="mi">201</span>
</code></pre></div>
<p>The runtime of this simulation is restricted by the simulation time of the driver output, which is <code>(driverstore-1)*dtdriver</code> of the precursor simulation <code>501</code>. The maximum runtime we can set is therefore</p>
<div class="highlight"><pre><span></span><code><span class="n">runtime</span>      <span class="o">=</span> <span class="mi">3</span><span class="mf">0.</span>
<span class="n">dtmax</span>        <span class="o">=</span> <span class="mf">0.15</span>
</code></pre></div>
<p>and we want to set <code>dtmax</code> = <code>dtdriver</code> (<code>501</code>) to avoid interpolation of the driver snapshots.</p>
<p>All boundary conditions (momentum, temperature) are set to inflow-outflow by:</p>
<div class="highlight"><pre><span></span><code><span class="p">&amp;</span><span class="n">BC</span>
<span class="n">BCxm</span>         <span class="o">=</span> <span class="mi">5</span>
</code></pre></div>
<p>for which we will also need to use the cyclic reduction scheme of the poisson solver:</p>
<div class="highlight"><pre><span></span><code><span class="p">&amp;</span><span class="n">DYNAMICS</span>
<span class="n">ipoiss</span>       <span class="o">=</span> <span class="mi">1</span>
</code></pre></div>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../udales-getting-started/" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Getting Started
              </div>
            </div>
          </a>
        
        
          <a href="../udales-simulation-setup/" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Set-up
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            The uDALES Team
          </div>
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/vendor.93c04032.min.js"></script>
      <script src="../assets/javascripts/bundle.83e5331e.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}</script>
      
      <script>
        app = initialize({
          base: "..",
          features: [],
          search: Object.assign({
            worker: "../assets/javascripts/worker/search.8c7e0a7e.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script>
      
    
  </body>
</html>