<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
   
    <meta name="description" content="Documentation for uDALES">
   
    <meta name="author" content="The uDALES Team" >
    <link rel="icon" href="../favicon.png">

    <title>modsave.f90 &ndash; uDALES</title>

    <link href="../css/bootstrap.min.css" rel="stylesheet">
    <link href="../css/pygments.css" rel="stylesheet">
    <link href="../css/font-awesome.min.css" rel="stylesheet">
    <link href="../css/local.css" rel="stylesheet">
    
    <link  href="../tipuesearch/tipuesearch.css" rel="stylesheet">
    
    

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    
    <script src="../js/jquery-2.1.3.min.js"></script>
    <script src="../js/svg-pan-zoom.min.js"></script>

  </head>

  <body>

    <!-- Fixed navbar -->
    <nav class="navbar navbar-inverse navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="../index.html">uDALES </a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
        
            <li class="dropdown hidden-xs visible-sm visible-md hidden-lg">
              <a href="#" class="dropdown-toggle"
              data-toggle="dropdown" role="button"
              aria-haspopup="true"
     aria-expanded="false">Contents <span class="caret"></span></a>
        <ul class="dropdown-menu">
          
              
            <li><a href="../lists/files.html">Source Files</a></li>
        
        
        
            <li><a href="../lists/modules.html">Modules</a></li>
        
            
                                
            <li><a href="../lists/procedures.html">Procedures</a></li>
        
               
            <li><a href="../lists/types.html">Derived Types</a></li>
        
        
            <li><a href="../program/dalesurban.html">Program</a></li>
      
            </ul>
            </li>


<li class="visible-xs hidden-sm visible-lg"><a href="../lists/files.html">Source Files</a></li>



<li class="visible-xs hidden-sm visible-lg"><a href="../lists/modules.html">Modules</a></li>



<li class="visible-xs hidden-sm visible-lg"><a href="../lists/procedures.html">Procedures</a></li>

                             
<li class="visible-xs hidden-sm visible-lg"><a href="../lists/types.html">Derived Types</a></li>


<li class="visible-xs hidden-sm visible-lg"><a href="../program/dalesurban.html">Program</a></li>

          </ul>
        
        <form action="../search.html" class="navbar-form navbar-right" role="search">
        <div class="form-group">
          <input type="text" class="form-control" placeholder="Search" name="q" id="tipue_search_input" autocomplete="off" required>
        </div>
<!--
        <button type="submit" class="btn btn-default">Submit</button>
-->
        </form>
        
        </div><!--/.nav-collapse -->
      </div>
    </nav>

    <div class="container">
    
  
  <div class="row">
    <h1>modsave.f90
    <small>Source File</small>
    
    </h1>
    
<div class="row">
  <div class="col-lg-12">
<div class="well well-sm">
  <ul class="list-inline" style="margin-bottom:0px;display:inline">
     
     
     
     
    
    
     <li><i class="fa fa-list-ol"></i>
       <a data-toggle="tooltip"
    data-placement="bottom" data-html="true"
    title=" 0.5% of total for source files.">70 statements</a>
     </li> 
     
     
     
    <li><i class="fa fa-code"></i><a href="../src/modsave.f90"> Source File</a></li>
     
     
  </ul>
  <ol class="breadcrumb in-well text-right">
  
    
  
     <li class="active">modsave.f90</li>
  </ol>
</div>
</div>
</div>
<script>
  $(function () {
  $('[data-toggle="tooltip"]').tooltip()
  })
</script>

  </div>
  <div class="row">
    <div class="col-md-3 hidden-xs hidden-sm visible-md visible-lg">
    
<div id="sidebar">
  
<h3>Contents</h3>
 







<div class="panel panel-primary">
  <div class="panel-heading text-left"><h3 class="panel-title"><a data-toggle="collapse" href="#mods-0">Modules</a></h3></div>
  <div id="mods-0" class="panel-collapse collapse">
    <div class="list-group">
      
      <a class="list-group-item" href="../module/modsave.html">modsave</a>
      
    </div>
  </div>
</div>
















<div class="panel panel-primary">
  <div class="panel-heading text-left"><h3 class="panel-title">Source Code</h3></div>
  <div class="list-group">
    <a class="list-group-item" href="../sourcefile/modsave.f90.html#src">modsave.f90</a>
  </div>
</div>



</div>

    </div>
    <div class="col-md-9" id='text'>
      
      <br>
    
    <div class="panel panel-default">
      <div class="panel-heading">
  <h3 class="panel-title">This file depends on</h3>
      </div>
      <div class="panel-body">
  <div class="depgraph"><?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: sourcefile~~modsave.f90~~EfferentGraph Pages: 1 -->
<svg id="sourcefilemodsavef90EfferentGraph" width="447pt" height="318pt"
 viewBox="0.00 0.00 447.00 318.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="sourcefile~~modsave.f90~~EfferentGraph" class="graph" transform="scale(1 1) rotate(0) translate(4 314)">
<title>sourcefile~~modsave.f90~~EfferentGraph</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-314 443,-314 443,4 -4,4"/>
<!-- sourcefile~modsave.f90 -->
<g id="sourcefile~~modsave.f90~~EfferentGraph_node1" class="node">
<title>sourcefile~modsave.f90</title>
<polygon fill="none" stroke="#000000" points="439,-166 365,-166 365,-142 439,-142 439,-166"/>
<text text-anchor="middle" x="402" y="-151.6" font-family="Helvetica,sans-Serif" font-size="10.50" fill="#000000">modsave.f90</text>
</g>
<!-- sourcefile~modsubgriddata.f90 -->
<g id="sourcefile~~modsave.f90~~EfferentGraph_node2" class="node">
<title>sourcefile~modsubgriddata.f90</title>
<g id="a_sourcefile~~modsave.f90~~EfferentGraph_node2"><a xlink:href=".././sourcefile/modsubgriddata.f90.html" xlink:title="modsubgriddata.f90">
<polygon fill="#f0ad4e" stroke="#f0ad4e" points="329,-310 221,-310 221,-286 329,-286 329,-310"/>
<text text-anchor="middle" x="275" y="-295.6" font-family="Helvetica,sans-Serif" font-size="10.50" fill="#ffffff">modsubgriddata.f90</text>
</a>
</g>
</g>
<!-- sourcefile~modsave.f90&#45;&gt;sourcefile~modsubgriddata.f90 -->
<g id="sourcefile~~modsave.f90~~EfferentGraph_edge2" class="edge">
<title>sourcefile~modsave.f90&#45;&gt;sourcefile~modsubgriddata.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M397.8331,-166.2903C388.9602,-190.714 365.9405,-245.6935 329,-277 327.446,-278.317 325.8001,-279.557 324.0863,-280.7239"/>
<polygon fill="#ff0000" stroke="#ff0000" points="321.9513,-277.9166 315.0653,-285.9686 325.4696,-283.9682 321.9513,-277.9166"/>
</g>
<!-- sourcefile~modsurfdata.f90 -->
<g id="sourcefile~~modsave.f90~~EfferentGraph_node3" class="node">
<title>sourcefile~modsurfdata.f90</title>
<g id="a_sourcefile~~modsave.f90~~EfferentGraph_node3"><a xlink:href=".././sourcefile/modsurfdata.f90.html" xlink:title="modsurfdata.f90">
<polygon fill="#f0ad4e" stroke="#f0ad4e" points="320.5,-268 229.5,-268 229.5,-244 320.5,-244 320.5,-268"/>
<text text-anchor="middle" x="275" y="-253.6" font-family="Helvetica,sans-Serif" font-size="10.50" fill="#ffffff">modsurfdata.f90</text>
</a>
</g>
</g>
<!-- sourcefile~modsave.f90&#45;&gt;sourcefile~modsurfdata.f90 -->
<g id="sourcefile~~modsave.f90~~EfferentGraph_edge3" class="edge">
<title>sourcefile~modsave.f90&#45;&gt;sourcefile~modsurfdata.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M393.9337,-166.0604C381.7416,-183.4625 357.0446,-215.6446 329,-235 326.7492,-236.5534 324.3675,-238.0137 321.908,-239.3832"/>
<polygon fill="#ff0000" stroke="#ff0000" points="320.1423,-236.3526 312.7565,-243.9486 323.2672,-242.6164 320.1423,-236.3526"/>
</g>
<!-- sourcefile~modinletdata.f90 -->
<g id="sourcefile~~modsave.f90~~EfferentGraph_node4" class="node">
<title>sourcefile~modinletdata.f90</title>
<g id="a_sourcefile~~modsave.f90~~EfferentGraph_node4"><a xlink:href=".././sourcefile/modinletdata.f90.html" xlink:title="modinletdata.f90">
<polygon fill="#f0ad4e" stroke="#f0ad4e" points="321,-226 229,-226 229,-202 321,-202 321,-226"/>
<text text-anchor="middle" x="275" y="-211.6" font-family="Helvetica,sans-Serif" font-size="10.50" fill="#ffffff">modinletdata.f90</text>
</a>
</g>
</g>
<!-- sourcefile~modsave.f90&#45;&gt;sourcefile~modinletdata.f90 -->
<g id="sourcefile~~modsave.f90~~EfferentGraph_edge4" class="edge">
<title>sourcefile~modsave.f90&#45;&gt;sourcefile~modinletdata.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M376.2997,-166.1419C357.1921,-175.1691 330.9052,-187.5881 309.8979,-197.5128"/>
<polygon fill="#ff0000" stroke="#ff0000" points="308.2087,-194.4398 300.6621,-201.8762 311.199,-200.769 308.2087,-194.4398"/>
</g>
<!-- sourcefile~modmpi.f90 -->
<g id="sourcefile~~modsave.f90~~EfferentGraph_node5" class="node">
<title>sourcefile~modmpi.f90</title>
<g id="a_sourcefile~~modsave.f90~~EfferentGraph_node5"><a xlink:href=".././sourcefile/modmpi.f90.html" xlink:title="modmpi.f90">
<polygon fill="#f0ad4e" stroke="#f0ad4e" points="69,-106 0,-106 0,-82 69,-82 69,-106"/>
<text text-anchor="middle" x="34.5" y="-91.6" font-family="Helvetica,sans-Serif" font-size="10.50" fill="#ffffff">modmpi.f90</text>
</a>
</g>
</g>
<!-- sourcefile~modsave.f90&#45;&gt;sourcefile~modmpi.f90 -->
<g id="sourcefile~~modsave.f90~~EfferentGraph_edge8" class="edge">
<title>sourcefile~modsave.f90&#45;&gt;sourcefile~modmpi.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M364.864,-154.607C353.368,-154.7685 340.6605,-154.9201 329,-155 281.0011,-155.3287 268.4017,-162.5551 221,-155 167.4196,-146.4601 108.322,-124.9357 71.3108,-109.8886"/>
<polygon fill="#ff0000" stroke="#ff0000" points="72.5166,-106.6 61.9374,-106.0238 69.8482,-113.0715 72.5166,-106.6"/>
</g>
<!-- sourcefile~modfields.f90 -->
<g id="sourcefile~~modsave.f90~~EfferentGraph_node6" class="node">
<title>sourcefile~modfields.f90</title>
<g id="a_sourcefile~~modsave.f90~~EfferentGraph_node6"><a xlink:href=".././sourcefile/modfields.f90.html" xlink:title="modfields.f90">
<polygon fill="#f0ad4e" stroke="#f0ad4e" points="313,-146 237,-146 237,-122 313,-122 313,-146"/>
<text text-anchor="middle" x="275" y="-131.6" font-family="Helvetica,sans-Serif" font-size="10.50" fill="#ffffff">modfields.f90</text>
</a>
</g>
</g>
<!-- sourcefile~modsave.f90&#45;&gt;sourcefile~modfields.f90 -->
<g id="sourcefile~~modsave.f90~~EfferentGraph_edge5" class="edge">
<title>sourcefile~modsave.f90&#45;&gt;sourcefile~modfields.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M364.9249,-148.1614C351.9728,-146.1217 337.2356,-143.8009 323.493,-141.6367"/>
<polygon fill="#ff0000" stroke="#ff0000" points="323.6467,-138.1178 313.2239,-140.0195 322.5577,-145.0326 323.6467,-138.1178"/>
</g>
<!-- sourcefile~initfac.f90 -->
<g id="sourcefile~~modsave.f90~~EfferentGraph_node7" class="node">
<title>sourcefile~initfac.f90</title>
<g id="a_sourcefile~~modsave.f90~~EfferentGraph_node7"><a xlink:href=".././sourcefile/initfac.f90.html" xlink:title="initfac.f90">
<polygon fill="#f0ad4e" stroke="#f0ad4e" points="304,-66 246,-66 246,-42 304,-42 304,-66"/>
<text text-anchor="middle" x="275" y="-51.6" font-family="Helvetica,sans-Serif" font-size="10.50" fill="#ffffff">initfac.f90</text>
</a>
</g>
</g>
<!-- sourcefile~modsave.f90&#45;&gt;sourcefile~initfac.f90 -->
<g id="sourcefile~~modsave.f90~~EfferentGraph_edge6" class="edge">
<title>sourcefile~modsave.f90&#45;&gt;sourcefile~initfac.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M392.4171,-141.9777C379.3729,-126.1997 354.6947,-98.3616 329,-80 324.119,-76.512 318.6975,-73.2763 313.2266,-70.3562"/>
<polygon fill="#ff0000" stroke="#ff0000" points="314.5664,-67.1125 304.0594,-65.751 311.424,-73.3676 314.5664,-67.1125"/>
</g>
<!-- sourcefile~modglobal.f90 -->
<g id="sourcefile~~modsave.f90~~EfferentGraph_node8" class="node">
<title>sourcefile~modglobal.f90</title>
<g id="a_sourcefile~~modsave.f90~~EfferentGraph_node8"><a xlink:href=".././sourcefile/modglobal.f90.html" xlink:title="modglobal.f90">
<polygon fill="#f0ad4e" stroke="#f0ad4e" points="185,-106 105,-106 105,-82 185,-82 185,-106"/>
<text text-anchor="middle" x="145" y="-91.6" font-family="Helvetica,sans-Serif" font-size="10.50" fill="#ffffff">modglobal.f90</text>
</a>
</g>
</g>
<!-- sourcefile~modsave.f90&#45;&gt;sourcefile~modglobal.f90 -->
<g id="sourcefile~~modsave.f90~~EfferentGraph_edge7" class="edge">
<title>sourcefile~modsave.f90&#45;&gt;sourcefile~modglobal.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M385.221,-141.9333C370.9862,-132.366 349.6435,-119.5517 329,-113 285.2126,-99.1031 232.9076,-94.8044 195.2766,-93.7164"/>
<polygon fill="#ff0000" stroke="#ff0000" points="195.1466,-90.2128 185.0712,-93.4894 194.9908,-97.211 195.1466,-90.2128"/>
</g>
<!-- sourcefile~modibmdata.f90 -->
<g id="sourcefile~~modsave.f90~~EfferentGraph_node9" class="node">
<title>sourcefile~modibmdata.f90</title>
<g id="a_sourcefile~~modsave.f90~~EfferentGraph_node9"><a xlink:href=".././sourcefile/modibmdata.f90.html" xlink:title="modibmdata.f90">
<polygon fill="#f0ad4e" stroke="#f0ad4e" points="320,-24 230,-24 230,0 320,0 320,-24"/>
<text text-anchor="middle" x="275" y="-9.6" font-family="Helvetica,sans-Serif" font-size="10.50" fill="#ffffff">modibmdata.f90</text>
</a>
</g>
</g>
<!-- sourcefile~modsave.f90&#45;&gt;sourcefile~modibmdata.f90 -->
<g id="sourcefile~~modsave.f90~~EfferentGraph_edge1" class="edge">
<title>sourcefile~modsave.f90&#45;&gt;sourcefile~modibmdata.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M397.7766,-141.9097C388.8021,-117.8837 365.6087,-63.7989 329,-33 327.4413,-31.6887 325.7913,-30.4534 324.0742,-29.2904"/>
<polygon fill="#ff0000" stroke="#ff0000" points="325.4494,-26.0422 315.0417,-24.0594 321.9412,-32.0997 325.4494,-26.0422"/>
</g>
<!-- sourcefile~modfields.f90&#45;&gt;sourcefile~modglobal.f90 -->
<g id="sourcefile~~modsave.f90~~EfferentGraph_edge9" class="edge">
<title>sourcefile~modfields.f90&#45;&gt;sourcefile~modglobal.f90</title>
<path fill="none" stroke="#00ffff" stroke-dasharray="5,2" d="M236.6988,-122.215C223.3112,-118.0957 208.0946,-113.4137 193.9578,-109.064"/>
<polygon fill="#00ffff" stroke="#00ffff" points="194.9663,-105.7124 184.3792,-106.1167 192.9076,-112.4028 194.9663,-105.7124"/>
</g>
<!-- sourcefile~initfac.f90&#45;&gt;sourcefile~modmpi.f90 -->
<g id="sourcefile~~modsave.f90~~EfferentGraph_edge11" class="edge">
<title>sourcefile~initfac.f90&#45;&gt;sourcefile~modmpi.f90</title>
<path fill="none" stroke="#003fff" stroke-dasharray="5,2" d="M245.8791,-55.6711C211.8272,-57.9893 153.8935,-63.0683 105,-73 96.5443,-74.7176 87.6413,-76.9913 79.1161,-79.4079"/>
<polygon fill="#003fff" stroke="#003fff" points="77.9373,-76.1063 69.3312,-82.2857 79.9125,-82.8219 77.9373,-76.1063"/>
</g>
<!-- sourcefile~initfac.f90&#45;&gt;sourcefile~modglobal.f90 -->
<g id="sourcefile~~modsave.f90~~EfferentGraph_edge10" class="edge">
<title>sourcefile~initfac.f90&#45;&gt;sourcefile~modglobal.f90</title>
<path fill="none" stroke="#003fff" stroke-dasharray="5,2" d="M245.8255,-62.9768C230.6815,-67.6365 211.7645,-73.4571 194.4202,-78.7938"/>
<polygon fill="#003fff" stroke="#003fff" points="192.9587,-75.5815 184.4302,-81.8676 195.0173,-82.2719 192.9587,-75.5815"/>
</g>
<!-- sourcefile~modglobal.f90&#45;&gt;sourcefile~modmpi.f90 -->
<g id="sourcefile~~modsave.f90~~EfferentGraph_edge12" class="edge">
<title>sourcefile~modglobal.f90&#45;&gt;sourcefile~modmpi.f90</title>
<path fill="none" stroke="#7f00ff" stroke-dasharray="5,2" d="M104.7944,-94C96.4589,-94 87.6289,-94 79.1455,-94"/>
<polygon fill="#7f00ff" stroke="#7f00ff" points="79.0261,-90.5001 69.0261,-94 79.0261,-97.5001 79.0261,-90.5001"/>
</g>
</g>
</svg>
</div><div><a type="button" class="graph-help" data-toggle="modal" href="#graph-help-text">Help</a></div><div class="modal fade" id="graph-help-text" tabindex="-1" role="dialog"><div class="modal-dialog modal-lg" role="document"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h4 class="modal-title" id="-graph-help-label">Graph Key</h4></div><div class="modal-body">
    <p>Nodes of different colours represent the following: </p>
    <?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: Graph Key Pages: 1 -->
<svg width="190pt" height="32pt"
 viewBox="0.00 0.00 190.00 32.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 28)">
<title>Graph Key</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-28 186,-28 186,4 -4,4"/>
<!-- Source File -->
<g id="node1" class="node">
<title>Source File</title>
<polygon fill="#f0ad4e" stroke="#f0ad4e" points="67,-24 0,-24 0,0 67,0 67,-24"/>
<text text-anchor="middle" x="33.5" y="-9.6" font-family="Helvetica,sans-Serif" font-size="10.50" fill="#ffffff">Source File</text>
</g>
<!-- This Page&#39;s Entity -->
<g id="node2" class="node">
<title>This Page&#39;s Entity</title>
<polygon fill="none" stroke="#000000" points="182,-24 85,-24 85,0 182,0 182,-24"/>
<text text-anchor="middle" x="133.5" y="-9.6" font-family="Helvetica,sans-Serif" font-size="10.50" fill="#000000">This Page&#39;s Entity</text>
</g>
</g>
</svg>

    
    <p>Solid arrows point from a file to a file which it depends on. A file
    is dependent upon another if the latter must be compiled before the former
    can be. Where possible, edges connecting nodes are given different colours to make them easier to distinguish in large graphs.
    </p>
    </div></div></div></div>
      </div>
    </div>
    
      
    <div class="panel panel-default">
      <div class="panel-heading">
  <h3 class="panel-title">Files dependent on this one</h3>
      </div>
      <div class="panel-body">
  <div class="depgraph"><?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: sourcefile~~modsave.f90~~AfferentGraph Pages: 1 -->
<svg id="sourcefilemodsavef90AfferentGraph" width="641pt" height="134pt"
 viewBox="0.00 0.00 641.00 133.91" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="sourcefile~~modsave.f90~~AfferentGraph" class="graph" transform="scale(.9197 .9197) rotate(0) translate(4 141.6068)">
<title>sourcefile~~modsave.f90~~AfferentGraph</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-141.6068 693,-141.6068 693,4 -4,4"/>
<!-- sourcefile~modsave.f90 -->
<g id="sourcefile~~modsave.f90~~AfferentGraph_node1" class="node">
<title>sourcefile~modsave.f90</title>
<polygon fill="none" stroke="#000000" points="74,-75.6068 0,-75.6068 0,-51.6068 74,-51.6068 74,-75.6068"/>
<text text-anchor="middle" x="37" y="-61.2068" font-family="Helvetica,sans-Serif" font-size="10.50" fill="#000000">modsave.f90</text>
</g>
<!-- sourcefile~moddriver.f90 -->
<g id="sourcefile~~modsave.f90~~AfferentGraph_node2" class="node">
<title>sourcefile~moddriver.f90</title>
<g id="a_sourcefile~~modsave.f90~~AfferentGraph_node2"><a xlink:href=".././sourcefile/moddriver.f90.html" xlink:title="moddriver.f90">
<polygon fill="#f0ad4e" stroke="#f0ad4e" points="189,-75.6068 110,-75.6068 110,-51.6068 189,-51.6068 189,-75.6068"/>
<text text-anchor="middle" x="149.5" y="-61.2068" font-family="Helvetica,sans-Serif" font-size="10.50" fill="#ffffff">moddriver.f90</text>
</a>
</g>
</g>
<!-- sourcefile~moddriver.f90&#45;&gt;sourcefile~modsave.f90 -->
<g id="sourcefile~~modsave.f90~~AfferentGraph_edge1" class="edge">
<title>sourcefile~moddriver.f90&#45;&gt;sourcefile~modsave.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M109.8367,-63.6068C101.5614,-63.6068 92.7602,-63.6068 84.2419,-63.6068"/>
<polygon fill="#ff0000" stroke="#ff0000" points="84.0462,-60.1069 74.0461,-63.6068 84.0461,-67.1069 84.0462,-60.1069"/>
</g>
<!-- sourcefile~modinlet.f90 -->
<g id="sourcefile~~modsave.f90~~AfferentGraph_node3" class="node">
<title>sourcefile~modinlet.f90</title>
<g id="a_sourcefile~~modsave.f90~~AfferentGraph_node3"><a xlink:href=".././sourcefile/modinlet.f90.html" xlink:title="modinlet.f90">
<polygon fill="#f0ad4e" stroke="#f0ad4e" points="185,-137.6068 114,-137.6068 114,-113.6068 185,-113.6068 185,-137.6068"/>
<text text-anchor="middle" x="149.5" y="-123.2068" font-family="Helvetica,sans-Serif" font-size="10.50" fill="#ffffff">modinlet.f90</text>
</a>
</g>
</g>
<!-- sourcefile~modinlet.f90&#45;&gt;sourcefile~modsave.f90 -->
<g id="sourcefile~~modsave.f90~~AfferentGraph_edge2" class="edge">
<title>sourcefile~modinlet.f90&#45;&gt;sourcefile~modsave.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M127.5418,-113.5054C110.5066,-104.1171 86.686,-90.9893 67.7533,-80.5553"/>
<polygon fill="#ff0000" stroke="#ff0000" points="69.3502,-77.4391 58.9028,-75.6777 65.9715,-83.5697 69.3502,-77.4391"/>
</g>
<!-- sourcefile~program.f90 -->
<g id="sourcefile~~modsave.f90~~AfferentGraph_node4" class="node">
<title>sourcefile~program.f90</title>
<g id="a_sourcefile~~modsave.f90~~AfferentGraph_node4"><a xlink:href=".././sourcefile/program.f90.html" xlink:title="program.f90">
<polygon fill="#f0ad4e" stroke="#f0ad4e" points="689,-75.6068 618,-75.6068 618,-51.6068 689,-51.6068 689,-75.6068"/>
<text text-anchor="middle" x="653.5" y="-61.2068" font-family="Helvetica,sans-Serif" font-size="10.50" fill="#ffffff">program.f90</text>
</a>
</g>
</g>
<!-- sourcefile~program.f90&#45;&gt;sourcefile~modsave.f90 -->
<g id="sourcefile~~modsave.f90~~AfferentGraph_edge3" class="edge">
<title>sourcefile~program.f90&#45;&gt;sourcefile~modsave.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M637.1009,-51.5446C623.1795,-41.9799 602.2864,-29.167 582,-22.6068 505.2479,2.2131 481.9233,2.6384 401.5,-3.6068"/>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M401.5,-3.6068C270.933,-9.7176 237.3817,-13.2981 110,-42.6068 101.5941,-44.5409 92.7183,-46.8575 84.1615,-49.2349"/>
<polygon fill="#ff0000" stroke="#ff0000" points="82.9725,-45.9341 74.3102,-52.0344 84.8861,-52.6675 82.9725,-45.9341"/>
</g>
<!-- sourcefile~modboundary.f90 -->
<g id="sourcefile~~modsave.f90~~AfferentGraph_node5" class="node">
<title>sourcefile~modboundary.f90</title>
<g id="a_sourcefile~~modsave.f90~~AfferentGraph_node5"><a xlink:href=".././sourcefile/modboundary.f90.html" xlink:title="modboundary.f90">
<polygon fill="#f0ad4e" stroke="#f0ad4e" points="322,-55.6068 225,-55.6068 225,-31.6068 322,-31.6068 322,-55.6068"/>
<text text-anchor="middle" x="273.5" y="-41.2068" font-family="Helvetica,sans-Serif" font-size="10.50" fill="#ffffff">modboundary.f90</text>
</a>
</g>
</g>
<!-- sourcefile~program.f90&#45;&gt;sourcefile~modboundary.f90 -->
<g id="sourcefile~~modsave.f90~~AfferentGraph_edge10" class="edge">
<title>sourcefile~program.f90&#45;&gt;sourcefile~modboundary.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M401.5,-3.6068C369.3276,-6.1051 334.472,-17.6233 309.2692,-27.6621"/>
<polygon fill="#ff0000" stroke="#ff0000" points="307.6959,-24.5243 299.7718,-31.557 310.352,-31.0008 307.6959,-24.5243"/>
</g>
<!-- sourcefile~modstartup.f90 -->
<g id="sourcefile~~modsave.f90~~AfferentGraph_node6" class="node">
<title>sourcefile~modstartup.f90</title>
<g id="a_sourcefile~~modsave.f90~~AfferentGraph_node6"><a xlink:href=".././sourcefile/modstartup.f90.html" xlink:title="modstartup.f90">
<polygon fill="#f0ad4e" stroke="#f0ad4e" points="574,-135.6068 489,-135.6068 489,-111.6068 574,-111.6068 574,-135.6068"/>
<text text-anchor="middle" x="531.5" y="-121.2068" font-family="Helvetica,sans-Serif" font-size="10.50" fill="#ffffff">modstartup.f90</text>
</a>
</g>
</g>
<!-- sourcefile~program.f90&#45;&gt;sourcefile~modstartup.f90 -->
<g id="sourcefile~~modsave.f90~~AfferentGraph_edge12" class="edge">
<title>sourcefile~program.f90&#45;&gt;sourcefile~modstartup.f90</title>
<path fill="none" stroke="#00ffff" stroke-dasharray="5,2" d="M628.8115,-75.7487C610.5389,-84.7352 585.4316,-97.0831 565.297,-106.9853"/>
<polygon fill="#00ffff" stroke="#00ffff" points="563.5807,-103.929 556.1518,-111.483 566.67,-110.2104 563.5807,-103.929"/>
</g>
<!-- sourcefile~modpois.f90 -->
<g id="sourcefile~~modsave.f90~~AfferentGraph_node7" class="node">
<title>sourcefile~modpois.f90</title>
<g id="a_sourcefile~~modsave.f90~~AfferentGraph_node7"><a xlink:href=".././sourcefile/modpois.f90.html" xlink:title="modpois.f90">
<polygon fill="#f0ad4e" stroke="#f0ad4e" points="437,-97.6068 366,-97.6068 366,-73.6068 437,-73.6068 437,-97.6068"/>
<text text-anchor="middle" x="401.5" y="-83.2068" font-family="Helvetica,sans-Serif" font-size="10.50" fill="#ffffff">modpois.f90</text>
</a>
</g>
</g>
<!-- sourcefile~program.f90&#45;&gt;sourcefile~modpois.f90 -->
<g id="sourcefile~~modsave.f90~~AfferentGraph_edge14" class="edge">
<title>sourcefile~program.f90&#45;&gt;sourcefile~modpois.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M531.5,-83.6068C503.554,-83.8494 472.2314,-84.3252 447.3352,-84.7518"/>
<polygon fill="#ff0000" stroke="#ff0000" points="447.0248,-81.2566 437.0875,-84.9308 447.1471,-88.2555 447.0248,-81.2566"/>
</g>
<!-- sourcefile~modsubgrid.f90 -->
<g id="sourcefile~~modsave.f90~~AfferentGraph_node8" class="node">
<title>sourcefile~modsubgrid.f90</title>
<g id="a_sourcefile~~modsave.f90~~AfferentGraph_node8"><a xlink:href=".././sourcefile/modsubgrid.f90.html" xlink:title="modsubgrid.f90">
<polygon fill="#f0ad4e" stroke="#f0ad4e" points="445,-55.6068 358,-55.6068 358,-31.6068 445,-31.6068 445,-55.6068"/>
<text text-anchor="middle" x="401.5" y="-41.2068" font-family="Helvetica,sans-Serif" font-size="10.50" fill="#ffffff">modsubgrid.f90</text>
</a>
</g>
</g>
<!-- sourcefile~program.f90&#45;&gt;sourcefile~modsubgrid.f90 -->
<g id="sourcefile~~modsave.f90~~AfferentGraph_edge15" class="edge">
<title>sourcefile~program.f90&#45;&gt;sourcefile~modsubgrid.f90</title>
<path fill="none" stroke="#00ffff" stroke-dasharray="5,2" d="M617.9835,-72.3884C593.776,-77.6416 560.9036,-83.3515 531.5,-83.6068"/>
<path fill="none" stroke="#00ffff" stroke-dasharray="5,2" d="M531.5,-83.6068C497.3712,-83.9031 460.3409,-71.1143 434.5644,-59.9214"/>
<polygon fill="#00ffff" stroke="#00ffff" points="435.8216,-56.6492 425.2658,-55.7404 432.9509,-63.0335 435.8216,-56.6492"/>
</g>
<!-- sourcefile~modstatsdump.f90 -->
<g id="sourcefile~~modsave.f90~~AfferentGraph_node9" class="node">
<title>sourcefile~modstatsdump.f90</title>
<g id="a_sourcefile~~modsave.f90~~AfferentGraph_node9"><a xlink:href=".././sourcefile/modstatsdump.f90.html" xlink:title="modstatsdump.f90">
<polygon fill="#f0ad4e" stroke="#f0ad4e" points="582,-55.6068 481,-55.6068 481,-31.6068 582,-31.6068 582,-55.6068"/>
<text text-anchor="middle" x="531.5" y="-41.2068" font-family="Helvetica,sans-Serif" font-size="10.50" fill="#ffffff">modstatsdump.f90</text>
</a>
</g>
</g>
<!-- sourcefile~program.f90&#45;&gt;sourcefile~modstatsdump.f90 -->
<g id="sourcefile~~modsave.f90~~AfferentGraph_edge18" class="edge">
<title>sourcefile~program.f90&#45;&gt;sourcefile~modstatsdump.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M617.8846,-57.7682C609.8107,-56.4446 601.0147,-55.0026 592.2262,-53.5619"/>
<polygon fill="#ff0000" stroke="#ff0000" points="592.7804,-50.1061 582.3459,-51.9422 591.6479,-57.0139 592.7804,-50.1061"/>
</g>
<!-- sourcefile~modboundary.f90&#45;&gt;sourcefile~moddriver.f90 -->
<g id="sourcefile~~modsave.f90~~AfferentGraph_edge5" class="edge">
<title>sourcefile~modboundary.f90&#45;&gt;sourcefile~moddriver.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M224.8478,-51.4539C216.4545,-52.8077 207.7186,-54.2167 199.2956,-55.5752"/>
<polygon fill="#ff0000" stroke="#ff0000" points="198.5357,-52.1525 189.2207,-57.2002 199.6504,-59.0632 198.5357,-52.1525"/>
</g>
<!-- sourcefile~modboundary.f90&#45;&gt;sourcefile~modinlet.f90 -->
<g id="sourcefile~~modsave.f90~~AfferentGraph_edge7" class="edge">
<title>sourcefile~modboundary.f90&#45;&gt;sourcefile~modinlet.f90</title>
<path fill="none" stroke="#00ff00" stroke-dasharray="5,2" d="M255.2034,-55.7062C234.4149,-69.4534 200.2891,-92.0204 176.4537,-107.7825"/>
<polygon fill="#00ff00" stroke="#00ff00" points="174.2823,-105.0224 167.8717,-113.4578 178.1434,-110.8612 174.2823,-105.0224"/>
</g>
<!-- sourcefile~modstartup.f90&#45;&gt;sourcefile~moddriver.f90 -->
<g id="sourcefile~~modsave.f90~~AfferentGraph_edge4" class="edge">
<title>sourcefile~modstartup.f90&#45;&gt;sourcefile~moddriver.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M401.5,-125.6068C345.2272,-117.2572 329.9627,-132.5577 273.5,-125.6068"/>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M273.5,-125.6068C235.5836,-120.9391 197.0171,-98.2258 173.1822,-81.6382"/>
<polygon fill="#ff0000" stroke="#ff0000" points="174.9676,-78.6117 164.8007,-75.6312 170.8899,-84.3014 174.9676,-78.6117"/>
</g>
<!-- sourcefile~modstartup.f90&#45;&gt;sourcefile~modinlet.f90 -->
<g id="sourcefile~~modsave.f90~~AfferentGraph_edge6" class="edge">
<title>sourcefile~modstartup.f90&#45;&gt;sourcefile~modinlet.f90</title>
<path fill="none" stroke="#00ff00" stroke-dasharray="5,2" d="M273.5,-125.6068C247.7221,-122.4334 218.7007,-122.2511 195.2183,-122.9454"/>
<polygon fill="#00ff00" stroke="#00ff00" points="195.0541,-119.449 185.1857,-123.3044 195.3045,-126.4445 195.0541,-119.449"/>
</g>
<!-- sourcefile~modstartup.f90&#45;&gt;sourcefile~modboundary.f90 -->
<g id="sourcefile~~modsave.f90~~AfferentGraph_edge9" class="edge">
<title>sourcefile~modstartup.f90&#45;&gt;sourcefile~modboundary.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M488.823,-127.7319C463.3417,-129.3349 430.4143,-129.897 401.5,-125.6068"/>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M401.5,-125.6068C357.1311,-119.0235 315.2567,-85.038 292.1214,-62.9372"/>
<polygon fill="#ff0000" stroke="#ff0000" points="294.3289,-60.1991 284.7462,-55.6799 289.4192,-65.1886 294.3289,-60.1991"/>
</g>
<!-- sourcefile~modstartup.f90&#45;&gt;sourcefile~modpois.f90 -->
<g id="sourcefile~~modsave.f90~~AfferentGraph_edge13" class="edge">
<title>sourcefile~modstartup.f90&#45;&gt;sourcefile~modpois.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M490.3672,-111.5834C476.5999,-107.5591 461.1736,-103.0499 447.0868,-98.9322"/>
<polygon fill="#ff0000" stroke="#ff0000" points="447.6894,-95.4619 437.109,-96.0156 445.7254,-102.1807 447.6894,-95.4619"/>
</g>
<!-- sourcefile~modstartup.f90&#45;&gt;sourcefile~modsubgrid.f90 -->
<g id="sourcefile~~modsave.f90~~AfferentGraph_edge16" class="edge">
<title>sourcefile~modstartup.f90&#45;&gt;sourcefile~modsubgrid.f90</title>
<path fill="none" stroke="#00ffff" stroke-dasharray="5,2" d="M504.7815,-111.5218C496.871,-107.5065 488.3619,-102.7379 481,-97.6068 463.1933,-85.1957 462.9647,-76.788 445,-64.6068 443.0826,-63.3066 441.0724,-62.0426 439.0119,-60.8219"/>
<polygon fill="#00ffff" stroke="#00ffff" points="440.2388,-57.5034 429.7866,-55.771 436.8771,-63.6434 440.2388,-57.5034"/>
</g>
<!-- sourcefile~modpois.f90&#45;&gt;sourcefile~modboundary.f90 -->
<g id="sourcefile~~modsave.f90~~AfferentGraph_edge8" class="edge">
<title>sourcefile~modpois.f90&#45;&gt;sourcefile~modboundary.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M365.8449,-73.9074C351.6455,-69.2483 335.1134,-63.8237 319.9935,-58.8625"/>
<polygon fill="#ff0000" stroke="#ff0000" points="320.893,-55.4741 310.3002,-55.6819 318.7106,-62.1252 320.893,-55.4741"/>
</g>
<!-- sourcefile~modsubgrid.f90&#45;&gt;sourcefile~modboundary.f90 -->
<g id="sourcefile~~modsave.f90~~AfferentGraph_edge11" class="edge">
<title>sourcefile~modsubgrid.f90&#45;&gt;sourcefile~modboundary.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M357.8077,-43.6068C349.6725,-43.6068 341.049,-43.6068 332.543,-43.6068"/>
<polygon fill="#ff0000" stroke="#ff0000" points="332.2665,-40.1069 322.2664,-43.6068 332.2664,-47.1069 332.2665,-40.1069"/>
</g>
<!-- sourcefile~modstatsdump.f90&#45;&gt;sourcefile~modsubgrid.f90 -->
<g id="sourcefile~~modsave.f90~~AfferentGraph_edge17" class="edge">
<title>sourcefile~modstatsdump.f90&#45;&gt;sourcefile~modsubgrid.f90</title>
<path fill="none" stroke="#00ffff" stroke-dasharray="5,2" d="M480.8664,-43.6068C472.4527,-43.6068 463.701,-43.6068 455.2141,-43.6068"/>
<polygon fill="#00ffff" stroke="#00ffff" points="455.0339,-40.1069 445.0339,-43.6068 455.0338,-47.1069 455.0339,-40.1069"/>
</g>
</g>
</svg>
</div><script>var pansourcefilemodsavef90AfferentGraph = svgPanZoom('#sourcefilemodsavef90AfferentGraph', {zoomEnabled: true,controlIconsEnabled: true, fit: true, center: true,}); </script><div><a type="button" class="graph-help" data-toggle="modal" href="#graph-help-text">Help</a></div><div class="modal fade" id="graph-help-text" tabindex="-1" role="dialog"><div class="modal-dialog modal-lg" role="document"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h4 class="modal-title" id="-graph-help-label">Graph Key</h4></div><div class="modal-body">
    <p>Nodes of different colours represent the following: </p>
    <?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: Graph Key Pages: 1 -->
<svg width="190pt" height="32pt"
 viewBox="0.00 0.00 190.00 32.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 28)">
<title>Graph Key</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-28 186,-28 186,4 -4,4"/>
<!-- Source File -->
<g id="node1" class="node">
<title>Source File</title>
<polygon fill="#f0ad4e" stroke="#f0ad4e" points="67,-24 0,-24 0,0 67,0 67,-24"/>
<text text-anchor="middle" x="33.5" y="-9.6" font-family="Helvetica,sans-Serif" font-size="10.50" fill="#ffffff">Source File</text>
</g>
<!-- This Page&#39;s Entity -->
<g id="node2" class="node">
<title>This Page&#39;s Entity</title>
<polygon fill="none" stroke="#000000" points="182,-24 85,-24 85,0 182,0 182,-24"/>
<text text-anchor="middle" x="133.5" y="-9.6" font-family="Helvetica,sans-Serif" font-size="10.50" fill="#000000">This Page&#39;s Entity</text>
</g>
</g>
</svg>

    
    <p>Solid arrows point from a file to a file which it depends on. A file
    is dependent upon another if the latter must be compiled before the former
    can be. Where possible, edges connecting nodes are given different colours to make them easier to distinguish in large graphs.
    </p>
    </div></div></div></div>
      </div>
    </div>
      
      <br>

    <section class="visible-xs visible-sm hidden-md">
      
<h3>Contents</h3>
 







<div class="panel panel-primary">
  <div class="panel-heading text-left"><h3 class="panel-title"><a data-toggle="collapse" href="#mods-1">Modules</a></h3></div>
  <div id="mods-1" class="panel-collapse collapse">
    <div class="list-group">
      
      <a class="list-group-item" href="../module/modsave.html">modsave</a>
      
    </div>
  </div>
</div>
















<div class="panel panel-primary">
  <div class="panel-heading text-left"><h3 class="panel-title">Source Code</h3></div>
  <div class="list-group">
    <a class="list-group-item" href="../sourcefile/modsave.f90.html#src">modsave.f90</a>
  </div>
</div>



    </section>
    <br class="visible-xs visible-sm hidden-md">

    <section>
      <h2><span class="anchor" id="src"></span>Source Code</h2>
    <div class="hl"><pre><span></span><a name="ln-1"></a><span class="c">!&gt; \file modsave.f90</span>
<a name="ln-2"></a><span class="c">!! Writes restart and data files.</span>
<a name="ln-3"></a><span class="c">!&gt; </span>
<a name="ln-4"></a><span class="c">!! modsave.f90 writes the restart and data files</span>
<a name="ln-5"></a><span class="c">!!  \author Jasper Tomas, June 4th 2015</span>
<a name="ln-6"></a><span class="c">!!  \todo documentation</span>
<a name="ln-7"></a><span class="c">!!  \par Revision list</span>
<a name="ln-8"></a><span class="c">!</span>
<a name="ln-9"></a>
<a name="ln-10"></a><span class="k">module </span><span class="n">modsave</span>
<a name="ln-11"></a>
<a name="ln-12"></a>
<a name="ln-13"></a><span class="k">implicit none</span>
<a name="ln-14"></a><span class="c">! private</span>
<a name="ln-15"></a><span class="c">! public :: writerestartfiles, writedatafiles</span>
<a name="ln-16"></a><span class="k">save</span>
<a name="ln-17"></a>
<a name="ln-18"></a><span class="k">contains</span>
<a name="ln-19"></a>
<a name="ln-20"></a>
<a name="ln-21"></a><span class="c">!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!</span>
<a name="ln-22"></a>  <span class="k">subroutine </span><span class="n">writerestartfiles</span>
<a name="ln-23"></a>    <span class="k">use </span><span class="n">modsurfdata</span><span class="p">,</span><span class="n">only</span><span class="p">:</span> <span class="n">ustar</span><span class="p">,</span><span class="n">thlflux</span><span class="p">,</span><span class="n">qtflux</span><span class="p">,</span><span class="n">svflux</span><span class="p">,</span><span class="n">dudz</span><span class="p">,</span><span class="n">dvdz</span><span class="p">,</span><span class="n">dthldz</span><span class="p">,</span><span class="n">dqtdz</span><span class="p">,</span><span class="n">ps</span><span class="p">,</span><span class="n">thls</span><span class="p">,</span><span class="n">qts</span><span class="p">,</span><span class="n">thvs</span><span class="p">,</span><span class="n">oblav</span>
<a name="ln-24"></a>
<a name="ln-25"></a>    <span class="k">use </span><span class="n">modfields</span><span class="p">,</span> <span class="n">only</span> <span class="p">:</span> <span class="n">u0</span><span class="p">,</span><span class="n">v0</span><span class="p">,</span><span class="n">w0</span><span class="p">,</span><span class="n">thl0</span><span class="p">,</span><span class="n">qt0</span><span class="p">,</span><span class="n">ql0</span><span class="p">,</span><span class="n">ql0h</span><span class="p">,</span><span class="n">e120</span><span class="p">,</span><span class="n">dthvdz</span><span class="p">,</span><span class="n">presf</span><span class="p">,</span><span class="n">presh</span><span class="p">,</span><span class="n">sv0</span><span class="p">,</span><span class="n">mindist</span><span class="p">,</span><span class="n">wall</span><span class="p">,&amp;</span>
<a name="ln-26"></a>                          <span class="n">uav</span><span class="p">,</span><span class="n">vav</span><span class="p">,</span><span class="n">wav</span><span class="p">,</span><span class="n">uuav</span><span class="p">,</span><span class="n">vvav</span><span class="p">,</span><span class="n">wwav</span><span class="p">,</span><span class="n">uvav</span><span class="p">,</span><span class="n">uwav</span><span class="p">,</span><span class="n">vwav</span><span class="p">,</span><span class="n">thlav</span><span class="p">,</span><span class="n">thl2av</span><span class="p">,</span><span class="n">qtav</span><span class="p">,</span><span class="n">qlav</span><span class="p">,</span><span class="n">ql2av</span><span class="p">,</span><span class="n">qt2av</span><span class="p">,</span><span class="n">svav</span><span class="p">,</span><span class="n">sv2av</span><span class="p">,</span><span class="n">momthick</span><span class="p">,&amp;</span>
<a name="ln-27"></a>                          <span class="n">friction</span><span class="p">,</span><span class="n">displthick</span><span class="p">,</span><span class="n">pres0</span><span class="p">,</span><span class="n">viscratioav</span><span class="p">,</span><span class="n">thluav</span><span class="p">,</span><span class="n">thlvav</span><span class="p">,</span><span class="n">thlwav</span><span class="p">,</span><span class="n">qtuav</span><span class="p">,</span><span class="n">qtvav</span><span class="p">,</span><span class="n">qtwav</span><span class="p">,</span><span class="n">qluav</span><span class="p">,</span><span class="n">qlvav</span><span class="p">,</span><span class="n">qlwav</span><span class="p">,</span><span class="n">svuav</span><span class="p">,</span><span class="n">svvav</span><span class="p">,</span><span class="n">svwav</span><span class="p">,&amp;</span>
<a name="ln-28"></a>                          <span class="n">upupav</span><span class="p">,</span><span class="n">vpvpav</span><span class="p">,</span><span class="n">wpwpav</span><span class="p">,</span><span class="n">thlpthlpav</span><span class="p">,</span><span class="n">qlpqlpav</span><span class="p">,</span><span class="n">qtpqtpav</span><span class="p">,</span><span class="n">svpsvpav</span><span class="p">,</span><span class="n">upvpav</span><span class="p">,</span><span class="n">upwpav</span><span class="p">,</span><span class="n">vpwpav</span><span class="p">,</span><span class="n">thlpupav</span><span class="p">,</span><span class="n">thlpvpav</span><span class="p">,&amp;</span>
<a name="ln-29"></a>                          <span class="n">thlpwpav</span><span class="p">,</span><span class="n">qlpupav</span><span class="p">,</span><span class="n">qlpvpav</span><span class="p">,</span><span class="n">qlpwpav</span><span class="p">,</span><span class="n">qtpupav</span><span class="p">,</span><span class="n">qtpvpav</span><span class="p">,</span><span class="n">qtpwpav</span><span class="p">,</span><span class="n">svpupav</span><span class="p">,</span><span class="n">svpvpav</span><span class="p">,</span><span class="n">svpwpav</span><span class="p">,</span><span class="n">presav</span><span class="p">,&amp;</span>
<a name="ln-30"></a>                          <span class="n">uusgsav</span><span class="p">,</span><span class="n">vvsgsav</span><span class="p">,</span><span class="n">wwsgsav</span><span class="p">,</span><span class="n">uwsgsav</span><span class="p">,</span><span class="n">thlusgsav</span><span class="p">,</span><span class="n">thlwsgsav</span><span class="p">,</span><span class="n">qlusgsav</span><span class="p">,</span><span class="n">qlwsgsav</span><span class="p">,</span><span class="n">qtusgsav</span><span class="p">,</span><span class="n">qtwsgsav</span><span class="p">,</span><span class="n">svusgsav</span><span class="p">,</span><span class="n">svwsgsav</span><span class="p">,</span><span class="n">tkesgsav</span><span class="p">,&amp;</span>
<a name="ln-31"></a>                          <span class="n">strain2av</span><span class="p">,</span><span class="n">disssgsav</span><span class="p">,</span><span class="n">t_vav</span><span class="p">,</span><span class="n">tvmx</span><span class="p">,</span><span class="n">tvmy</span><span class="p">,</span><span class="n">tvmz</span><span class="p">,</span><span class="n">tsgsmx1</span><span class="p">,</span><span class="n">tsgsmx2</span><span class="p">,</span><span class="n">tsgsmy1</span><span class="p">,</span><span class="n">tsgsmy2</span><span class="p">,</span><span class="n">tsgsmz1</span><span class="p">,&amp;</span>
<a name="ln-32"></a>                          <span class="n">tsgsmz2</span><span class="p">,</span><span class="n">t_sgsav</span><span class="p">,</span><span class="n">nusgsav</span><span class="p">,</span><span class="n">tpm</span><span class="p">,</span><span class="n">t_pav</span><span class="p">,</span><span class="n">ttmx</span><span class="p">,</span><span class="n">ttmy</span><span class="p">,</span><span class="n">ttmz</span><span class="p">,</span><span class="n">t_tav</span><span class="p">,</span><span class="n">p_bav</span><span class="p">,</span><span class="n">d_sgsav</span><span class="p">,</span><span class="n">p_tav</span><span class="p">,</span><span class="n">tkeadv</span>
<a name="ln-33"></a>    <span class="k">use </span><span class="n">modglobal</span><span class="p">,</span> <span class="n">only</span> <span class="p">:</span> <span class="n">ib</span><span class="p">,</span><span class="n">ie</span><span class="p">,</span><span class="n">ih</span><span class="p">,</span><span class="n">jb</span><span class="p">,</span><span class="n">je</span><span class="p">,</span><span class="n">jh</span><span class="p">,</span><span class="n">kb</span><span class="p">,</span><span class="n">ke</span><span class="p">,</span><span class="n">kh</span><span class="p">,</span><span class="n">trestart</span><span class="p">,</span><span class="n">tnextrestart</span><span class="p">,</span><span class="n">dt_lim</span><span class="p">,</span><span class="n">timee</span><span class="p">,</span><span class="n">btime</span><span class="p">,</span><span class="n">xh</span><span class="p">,&amp;</span>
<a name="ln-34"></a>                          <span class="n">cexpnr</span><span class="p">,</span><span class="n">ntimee</span><span class="p">,</span><span class="n">rk3step</span><span class="p">,</span><span class="n">ifoutput</span><span class="p">,</span><span class="n">nsv</span><span class="p">,</span><span class="n">timeleft</span><span class="p">,</span><span class="n">dt</span><span class="p">,</span><span class="n">ntrun</span><span class="p">,</span><span class="n">totavtime</span><span class="p">,&amp;</span>
<a name="ln-35"></a>                          <span class="n">iinletgen</span><span class="p">,</span><span class="n">timee</span><span class="p">,</span><span class="n">runavtime</span><span class="p">,</span><span class="n">inletav</span><span class="p">,</span><span class="n">totinletav</span><span class="p">,</span><span class="n">linletRA</span><span class="p">,</span><span class="n">ltempeq</span><span class="p">,</span><span class="n">lmoist</span><span class="p">,</span><span class="n">jgb</span><span class="p">,</span><span class="n">jge</span><span class="p">,&amp;</span>
<a name="ln-36"></a>                          <span class="n">dzf</span><span class="p">,</span><span class="n">dzfi</span><span class="p">,</span><span class="n">dzhi</span><span class="p">,</span><span class="n">dxf</span><span class="p">,</span><span class="n">dxfi</span><span class="p">,</span><span class="n">dyi</span><span class="p">,</span><span class="n">dxhi</span><span class="p">,</span><span class="n">nstore</span><span class="p">,</span><span class="n">numol</span><span class="p">,</span><span class="n">dy2i</span><span class="p">,</span><span class="n">grav</span><span class="p">,</span><span class="n">libm</span><span class="p">,</span><span class="n">jmax</span><span class="p">,</span><span class="n">nblocks</span>
<a name="ln-37"></a>    <span class="k">use </span><span class="n">modmpi</span><span class="p">,</span>    <span class="n">only</span> <span class="p">:</span> <span class="n">cmyid</span><span class="p">,</span><span class="n">myid</span><span class="p">,</span><span class="n">slabsum</span><span class="p">,</span><span class="n">excjs</span>
<a name="ln-38"></a>    <span class="k">use </span><span class="n">modsubgriddata</span><span class="p">,</span> <span class="n">only</span> <span class="p">:</span> <span class="n">ekm</span>
<a name="ln-39"></a>    <span class="k">use </span><span class="n">modibmdata</span><span class="p">,</span>   <span class="n">only</span>  <span class="p">:</span> <span class="n">ibmxforcevol</span>
<a name="ln-40"></a>    <span class="k">use </span><span class="n">initfac</span> <span class="p">,</span> <span class="n">only</span> <span class="p">:</span> <span class="k">block</span>
<a name="ln-41"></a><span class="k">    use </span><span class="n">modinletdata</span><span class="p">,</span> <span class="n">only</span>   <span class="p">:</span> <span class="n">Urec</span><span class="p">,</span><span class="n">Wrec</span><span class="p">,</span><span class="n">Uinl</span><span class="p">,</span><span class="n">Utav</span><span class="p">,</span><span class="n">QLinl</span><span class="p">,</span><span class="n">QTinl</span><span class="p">,</span><span class="n">QLrec</span><span class="p">,</span><span class="n">QTrec</span><span class="p">,</span><span class="n">QTtav</span><span class="p">,</span><span class="n">QLtav</span><span class="p">,</span><span class="n">Ttav</span><span class="p">,</span><span class="n">upupavinl</span><span class="p">,</span><span class="n">vpvpavinl</span><span class="p">,</span><span class="n">wpwpavinl</span><span class="p">,</span><span class="n">upwpavinl</span><span class="p">,&amp;</span>
<a name="ln-42"></a>                               <span class="n">thlpthlpavinl</span><span class="p">,</span><span class="n">thlpupavinl</span><span class="p">,</span><span class="n">thlpwpavinl</span><span class="p">,</span><span class="n">qlpqlpavinl</span><span class="p">,</span><span class="n">qlpupavinl</span><span class="p">,</span><span class="n">qlpwpavinl</span><span class="p">,</span><span class="n">qtpqtpavinl</span><span class="p">,</span><span class="n">qtpupavinl</span><span class="p">,</span><span class="n">qtpwpavinl</span><span class="p">,</span><span class="n">Tinl</span><span class="p">,</span><span class="n">Trec</span><span class="p">,</span><span class="n">nstepread</span>
<a name="ln-43"></a>
<a name="ln-44"></a>    <span class="k">implicit none</span>
<a name="ln-45"></a><span class="k">    </span><span class="kt">logical</span> <span class="kd">::</span> <span class="n">lexitnow</span> <span class="o">=</span> <span class="p">.</span><span class="n">false</span><span class="p">.</span>
<a name="ln-46"></a>    <span class="kt">integer </span><span class="n">imin</span><span class="p">,</span><span class="n">ihour</span>
<a name="ln-47"></a>    <span class="kt">integer </span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">,</span><span class="n">k</span><span class="p">,</span><span class="n">n</span><span class="p">,</span><span class="n">im</span><span class="p">,</span><span class="n">ip</span><span class="p">,</span><span class="n">jm</span><span class="p">,</span><span class="n">jp</span><span class="p">,</span><span class="n">jpp</span><span class="p">,</span><span class="n">km</span><span class="p">,</span><span class="n">kp</span><span class="p">,</span><span class="n">kpp</span><span class="p">,</span><span class="n">il</span><span class="p">,</span><span class="n">iu</span><span class="p">,</span><span class="n">jl</span><span class="p">,</span><span class="n">ju</span><span class="p">,</span><span class="n">kl</span><span class="p">,</span><span class="n">ku</span>
<a name="ln-48"></a>    <span class="kt">character</span><span class="p">(</span><span class="mi">21</span><span class="p">)</span> <span class="n">name</span><span class="p">,</span><span class="n">name2</span><span class="p">,</span><span class="n">name3</span><span class="p">,</span><span class="n">name4</span><span class="p">,</span><span class="n">linkname</span>
<a name="ln-49"></a>
<a name="ln-50"></a>    <span class="k">if</span> <span class="p">(</span><span class="n">timee</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span>
<a name="ln-51"></a><span class="c">!    if (rk3step /=3) return</span>
<a name="ln-52"></a>    <span class="k">if</span> <span class="p">((</span><span class="n">iinletgen</span><span class="o">==</span><span class="mi">2</span><span class="p">)</span> <span class="p">.</span><span class="nb">and</span><span class="p">.</span> <span class="p">(</span><span class="n">nstepread</span><span class="o">==</span><span class="n">nstore</span><span class="p">))</span> <span class="k">then</span>                <span class="c">! This overrules the need for rk3step to be 3 in case of reading inletfiles</span>
<a name="ln-53"></a>      <span class="k">write</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span><span class="o">*</span><span class="p">)</span> <span class="s1">&#39;Writing restartfiles after reading in new inletfiles&#39;</span>
<a name="ln-54"></a>    <span class="k">else</span>
<a name="ln-55"></a><span class="k">      if</span> <span class="p">(</span><span class="n">rk3step</span> <span class="o">/=</span><span class="mi">3</span><span class="p">)</span> <span class="k">return</span>   <span class="c">! Normal check</span>
<a name="ln-56"></a>    <span class="k">end if</span>
<a name="ln-57"></a>
<a name="ln-58"></a><span class="k">    </span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;exit_now.&#39;</span><span class="o">//</span><span class="n">cexpnr</span>
<a name="ln-59"></a>    <span class="k">inquire</span><span class="p">(</span><span class="k">file</span><span class="o">=</span><span class="nb">trim</span><span class="p">(</span><span class="n">name</span><span class="p">),</span> <span class="n">EXIST</span><span class="o">=</span><span class="n">lexitnow</span><span class="p">)</span>
<a name="ln-60"></a>
<a name="ln-61"></a>    <span class="k">if</span> <span class="p">(((</span><span class="n">timee</span><span class="o">&gt;=</span><span class="n">tnextrestart</span><span class="p">))</span> <span class="p">.</span><span class="nb">or</span><span class="p">.</span> <span class="p">((</span><span class="n">lexitnow</span><span class="p">)</span> <span class="p">.</span><span class="nb">or</span><span class="p">.</span> <span class="p">(</span><span class="n">nstepread</span> <span class="o">==</span> <span class="n">nstore</span><span class="o">+</span><span class="mi">1</span><span class="p">)))</span> <span class="k">then</span>
<a name="ln-62"></a><span class="k">      </span><span class="n">tnextrestart</span> <span class="o">=</span> <span class="n">tnextrestart</span><span class="o">+</span><span class="n">trestart</span>
<a name="ln-63"></a>    
<a name="ln-64"></a>      <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;initd        _   .&#39;</span>
<a name="ln-65"></a>      <span class="k">write</span> <span class="p">(</span><span class="n">name</span><span class="p">(</span><span class="mi">6</span><span class="p">:</span><span class="mi">13</span><span class="p">)</span>  <span class="p">,</span><span class="s1">&#39;(i8.8)&#39;</span><span class="p">)</span> <span class="n">ntrun</span>
<a name="ln-66"></a>      <span class="n">name</span><span class="p">(</span><span class="mi">15</span><span class="p">:</span><span class="mi">17</span><span class="p">)</span><span class="o">=</span> <span class="n">cmyid</span>
<a name="ln-67"></a>      <span class="n">name</span><span class="p">(</span><span class="mi">19</span><span class="p">:</span><span class="mi">21</span><span class="p">)</span><span class="o">=</span> <span class="n">cexpnr</span>
<a name="ln-68"></a>      <span class="k">open</span>  <span class="p">(</span><span class="n">ifoutput</span><span class="p">,</span><span class="k">file</span><span class="o">=</span><span class="n">name</span><span class="p">,</span><span class="n">form</span><span class="o">=</span><span class="s1">&#39;unformatted&#39;</span><span class="p">,</span><span class="n">status</span><span class="o">=</span><span class="s1">&#39;replace&#39;</span><span class="p">)</span>
<a name="ln-69"></a>
<a name="ln-70"></a>      <span class="k">write</span><span class="p">(</span><span class="n">ifoutput</span><span class="p">)</span>  <span class="p">(((</span><span class="n">mindist</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">,</span><span class="n">k</span><span class="p">),</span><span class="n">i</span><span class="o">=</span><span class="n">ib</span><span class="p">,</span><span class="n">ie</span>  <span class="p">),</span><span class="n">j</span><span class="o">=</span><span class="n">jb</span><span class="p">,</span><span class="n">je</span>      <span class="p">),</span><span class="n">k</span><span class="o">=</span><span class="n">kb</span><span class="p">,</span><span class="n">ke</span>   <span class="p">)</span>
<a name="ln-71"></a>      <span class="k">write</span><span class="p">(</span><span class="n">ifoutput</span><span class="p">)</span>  <span class="p">((((</span><span class="n">wall</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">,</span><span class="n">k</span><span class="p">,</span><span class="n">n</span><span class="p">),</span><span class="n">i</span><span class="o">=</span><span class="n">ib</span><span class="p">,</span><span class="n">ie</span>  <span class="p">),</span><span class="n">j</span><span class="o">=</span><span class="n">jb</span><span class="p">,</span><span class="n">je</span>      <span class="p">),</span><span class="n">k</span><span class="o">=</span><span class="n">kb</span><span class="p">,</span><span class="n">ke</span>   <span class="p">),</span><span class="n">n</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="mi">5</span><span class="p">)</span>
<a name="ln-72"></a>      <span class="k">write</span><span class="p">(</span><span class="n">ifoutput</span><span class="p">)</span>  <span class="p">(((</span><span class="n">u0</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">,</span><span class="n">k</span><span class="p">),</span><span class="n">i</span><span class="o">=</span><span class="n">ib</span><span class="o">-</span><span class="n">ih</span><span class="p">,</span><span class="n">ie</span><span class="o">+</span><span class="n">ih</span><span class="p">),</span><span class="n">j</span><span class="o">=</span><span class="n">jb</span><span class="o">-</span><span class="n">jh</span><span class="p">,</span><span class="n">je</span><span class="o">+</span><span class="n">jh</span><span class="p">),</span><span class="n">k</span><span class="o">=</span><span class="n">kb</span><span class="p">,</span><span class="n">ke</span><span class="o">+</span><span class="n">kh</span><span class="p">)</span>
<a name="ln-73"></a>      <span class="k">write</span><span class="p">(</span><span class="n">ifoutput</span><span class="p">)</span>  <span class="p">(((</span><span class="n">v0</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">,</span><span class="n">k</span><span class="p">),</span><span class="n">i</span><span class="o">=</span><span class="n">ib</span><span class="o">-</span><span class="n">ih</span><span class="p">,</span><span class="n">ie</span><span class="o">+</span><span class="n">ih</span><span class="p">),</span><span class="n">j</span><span class="o">=</span><span class="n">jb</span><span class="o">-</span><span class="n">jh</span><span class="p">,</span><span class="n">je</span><span class="o">+</span><span class="n">jh</span><span class="p">),</span><span class="n">k</span><span class="o">=</span><span class="n">kb</span><span class="p">,</span><span class="n">ke</span><span class="o">+</span><span class="n">kh</span><span class="p">)</span>
<a name="ln-74"></a>      <span class="k">write</span><span class="p">(</span><span class="n">ifoutput</span><span class="p">)</span>  <span class="p">(((</span><span class="n">w0</span>    <span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">,</span><span class="n">k</span><span class="p">),</span><span class="n">i</span><span class="o">=</span><span class="n">ib</span><span class="o">-</span><span class="n">ih</span><span class="p">,</span><span class="n">ie</span><span class="o">+</span><span class="n">ih</span><span class="p">),</span><span class="n">j</span><span class="o">=</span><span class="n">jb</span><span class="o">-</span><span class="n">jh</span><span class="p">,</span><span class="n">je</span><span class="o">+</span><span class="n">jh</span><span class="p">),</span><span class="n">k</span><span class="o">=</span><span class="n">kb</span><span class="p">,</span><span class="n">ke</span><span class="o">+</span><span class="n">kh</span><span class="p">)</span>
<a name="ln-75"></a>      <span class="k">write</span><span class="p">(</span><span class="n">ifoutput</span><span class="p">)</span>  <span class="p">(((</span><span class="n">pres0</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">,</span><span class="n">k</span><span class="p">),</span><span class="n">i</span><span class="o">=</span><span class="n">ib</span><span class="o">-</span><span class="n">ih</span><span class="p">,</span><span class="n">ie</span><span class="o">+</span><span class="n">ih</span><span class="p">),</span><span class="n">j</span><span class="o">=</span><span class="n">jb</span><span class="o">-</span><span class="n">jh</span><span class="p">,</span><span class="n">je</span><span class="o">+</span><span class="n">jh</span><span class="p">),</span><span class="n">k</span><span class="o">=</span><span class="n">kb</span><span class="p">,</span><span class="n">ke</span><span class="o">+</span><span class="n">kh</span><span class="p">)</span>
<a name="ln-76"></a>      <span class="k">write</span><span class="p">(</span><span class="n">ifoutput</span><span class="p">)</span>  <span class="p">(((</span><span class="n">thl0</span>  <span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">,</span><span class="n">k</span><span class="p">),</span><span class="n">i</span><span class="o">=</span><span class="n">ib</span><span class="o">-</span><span class="n">ih</span><span class="p">,</span><span class="n">ie</span><span class="o">+</span><span class="n">ih</span><span class="p">),</span><span class="n">j</span><span class="o">=</span><span class="n">jb</span><span class="o">-</span><span class="n">jh</span><span class="p">,</span><span class="n">je</span><span class="o">+</span><span class="n">jh</span><span class="p">),</span><span class="n">k</span><span class="o">=</span><span class="n">kb</span><span class="p">,</span><span class="n">ke</span><span class="o">+</span><span class="n">kh</span><span class="p">)</span>
<a name="ln-77"></a>      <span class="k">write</span><span class="p">(</span><span class="n">ifoutput</span><span class="p">)</span>  <span class="p">(((</span><span class="n">e120</span>  <span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">,</span><span class="n">k</span><span class="p">),</span><span class="n">i</span><span class="o">=</span><span class="n">ib</span><span class="o">-</span><span class="n">ih</span><span class="p">,</span><span class="n">ie</span><span class="o">+</span><span class="n">ih</span><span class="p">),</span><span class="n">j</span><span class="o">=</span><span class="n">jb</span><span class="o">-</span><span class="n">jh</span><span class="p">,</span><span class="n">je</span><span class="o">+</span><span class="n">jh</span><span class="p">),</span><span class="n">k</span><span class="o">=</span><span class="n">kb</span><span class="p">,</span><span class="n">ke</span><span class="o">+</span><span class="n">kh</span><span class="p">)</span>
<a name="ln-78"></a>      <span class="k">write</span><span class="p">(</span><span class="n">ifoutput</span><span class="p">)</span>  <span class="p">(((</span><span class="n">ekm</span>   <span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">,</span><span class="n">k</span><span class="p">),</span><span class="n">i</span><span class="o">=</span><span class="n">ib</span><span class="o">-</span><span class="n">ih</span><span class="p">,</span><span class="n">ie</span><span class="o">+</span><span class="n">ih</span><span class="p">),</span><span class="n">j</span><span class="o">=</span><span class="n">jb</span><span class="o">-</span><span class="n">jh</span><span class="p">,</span><span class="n">je</span><span class="o">+</span><span class="n">jh</span><span class="p">),</span><span class="n">k</span><span class="o">=</span><span class="n">kb</span><span class="p">,</span><span class="n">ke</span><span class="o">+</span><span class="n">kh</span><span class="p">)</span>
<a name="ln-79"></a>      <span class="k">write</span><span class="p">(</span><span class="n">ifoutput</span><span class="p">)</span>  <span class="p">(((</span><span class="n">qt0</span>   <span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">,</span><span class="n">k</span><span class="p">),</span><span class="n">i</span><span class="o">=</span><span class="n">ib</span><span class="o">-</span><span class="n">ih</span><span class="p">,</span><span class="n">ie</span><span class="o">+</span><span class="n">ih</span><span class="p">),</span><span class="n">j</span><span class="o">=</span><span class="n">jb</span><span class="o">-</span><span class="n">jh</span><span class="p">,</span><span class="n">je</span><span class="o">+</span><span class="n">jh</span><span class="p">),</span><span class="n">k</span><span class="o">=</span><span class="n">kb</span><span class="p">,</span><span class="n">ke</span><span class="o">+</span><span class="n">kh</span><span class="p">)</span>
<a name="ln-80"></a>      <span class="k">write</span><span class="p">(</span><span class="n">ifoutput</span><span class="p">)</span>  <span class="p">(((</span><span class="n">ql0</span>   <span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">,</span><span class="n">k</span><span class="p">),</span><span class="n">i</span><span class="o">=</span><span class="n">ib</span><span class="o">-</span><span class="n">ih</span><span class="p">,</span><span class="n">ie</span><span class="o">+</span><span class="n">ih</span><span class="p">),</span><span class="n">j</span><span class="o">=</span><span class="n">jb</span><span class="o">-</span><span class="n">jh</span><span class="p">,</span><span class="n">je</span><span class="o">+</span><span class="n">jh</span><span class="p">),</span><span class="n">k</span><span class="o">=</span><span class="n">kb</span><span class="p">,</span><span class="n">ke</span><span class="o">+</span><span class="n">kh</span><span class="p">)</span>
<a name="ln-81"></a>      <span class="k">write</span><span class="p">(</span><span class="n">ifoutput</span><span class="p">)</span>  <span class="p">(((</span><span class="n">ql0h</span>  <span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">,</span><span class="n">k</span><span class="p">),</span><span class="n">i</span><span class="o">=</span><span class="n">ib</span><span class="o">-</span><span class="n">ih</span><span class="p">,</span><span class="n">ie</span><span class="o">+</span><span class="n">ih</span><span class="p">),</span><span class="n">j</span><span class="o">=</span><span class="n">jb</span><span class="o">-</span><span class="n">jh</span><span class="p">,</span><span class="n">je</span><span class="o">+</span><span class="n">jh</span><span class="p">),</span><span class="n">k</span><span class="o">=</span><span class="n">kb</span><span class="p">,</span><span class="n">ke</span><span class="o">+</span><span class="n">kh</span><span class="p">)</span>
<a name="ln-82"></a>      <span class="k">write</span><span class="p">(</span><span class="n">ifoutput</span><span class="p">)</span>  <span class="n">timee</span><span class="p">,</span>  <span class="n">dt</span>
<a name="ln-83"></a>      
<a name="ln-84"></a>      <span class="k">if</span> <span class="p">(</span><span class="n">myid</span><span class="o">==</span><span class="mi">0</span><span class="p">)</span> <span class="k">then</span>
<a name="ln-85"></a><span class="k">        write</span><span class="p">(</span><span class="o">*</span><span class="p">,</span><span class="o">*</span><span class="p">)</span> <span class="s1">&#39;-------------------------&#39;</span>
<a name="ln-86"></a>        <span class="k">write</span><span class="p">(</span><span class="o">*</span><span class="p">,</span><span class="o">*</span><span class="p">)</span> <span class="s1">&#39;Saving initd restart file&#39;</span>
<a name="ln-87"></a>        <span class="k">write</span><span class="p">(</span><span class="o">*</span><span class="p">,</span><span class="o">*</span><span class="p">)</span> <span class="s1">&#39;ntrun ::: &#39;</span><span class="p">,</span> <span class="n">ntrun</span>
<a name="ln-88"></a>        <span class="k">write</span><span class="p">(</span><span class="o">*</span><span class="p">,</span><span class="o">*</span><span class="p">)</span> <span class="s1">&#39;timee ::: &#39;</span><span class="p">,</span> <span class="n">timee</span>
<a name="ln-89"></a>        <span class="k">write</span><span class="p">(</span><span class="o">*</span><span class="p">,</span><span class="o">*</span><span class="p">)</span> <span class="s1">&#39;-------------------------&#39;</span>
<a name="ln-90"></a>      <span class="n">endif</span>
<a name="ln-91"></a>      
<a name="ln-92"></a>      <span class="k">close</span> <span class="p">(</span><span class="n">ifoutput</span><span class="p">)</span>
<a name="ln-93"></a>
<a name="ln-94"></a>      <span class="k">if</span> <span class="p">(</span><span class="n">nsv</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">)</span> <span class="k">then</span>
<a name="ln-95"></a><span class="k">        </span><span class="n">name</span>  <span class="o">=</span> <span class="s1">&#39;inits        _   .&#39;</span>
<a name="ln-96"></a>        <span class="k">write</span> <span class="p">(</span><span class="n">name</span><span class="p">(</span><span class="mi">6</span><span class="p">:</span><span class="mi">13</span><span class="p">)</span> <span class="p">,</span><span class="s1">&#39;(i8.8)&#39;</span><span class="p">)</span> <span class="n">ntrun</span>
<a name="ln-97"></a>        <span class="n">name</span><span class="p">(</span><span class="mi">15</span><span class="p">:</span><span class="mi">17</span><span class="p">)</span> <span class="o">=</span> <span class="n">cmyid</span>
<a name="ln-98"></a>        <span class="n">name</span><span class="p">(</span><span class="mi">19</span><span class="p">:</span><span class="mi">21</span><span class="p">)</span> <span class="o">=</span> <span class="n">cexpnr</span>
<a name="ln-99"></a>        <span class="k">open</span>  <span class="p">(</span><span class="n">ifoutput</span><span class="p">,</span><span class="k">file</span><span class="o">=</span><span class="n">name</span><span class="p">,</span><span class="n">form</span><span class="o">=</span><span class="s1">&#39;unformatted&#39;</span><span class="p">)</span>
<a name="ln-100"></a>        <span class="k">write</span><span class="p">(</span><span class="n">ifoutput</span><span class="p">)</span> <span class="p">((((</span><span class="n">sv0</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">,</span><span class="n">k</span><span class="p">,</span><span class="n">n</span><span class="p">),</span><span class="n">i</span><span class="o">=</span><span class="n">ib</span><span class="o">-</span><span class="n">ih</span><span class="p">,</span><span class="n">ie</span><span class="o">+</span><span class="n">ih</span><span class="p">),</span><span class="n">j</span><span class="o">=</span><span class="n">jb</span><span class="o">-</span><span class="n">jh</span><span class="p">,</span><span class="n">je</span><span class="o">+</span><span class="n">jh</span><span class="p">),</span><span class="n">k</span><span class="o">=</span><span class="n">kb</span><span class="p">,</span><span class="n">ke</span><span class="o">+</span><span class="n">kh</span><span class="p">),</span><span class="n">n</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">nsv</span><span class="p">)</span>
<a name="ln-101"></a>        <span class="k">write</span><span class="p">(</span><span class="n">ifoutput</span><span class="p">)</span>  <span class="n">timee</span>
<a name="ln-102"></a>
<a name="ln-103"></a>        <span class="k">close</span> <span class="p">(</span><span class="n">ifoutput</span><span class="p">)</span>
<a name="ln-104"></a>      <span class="k">end if</span>
<a name="ln-105"></a>
<a name="ln-106"></a><span class="k">      if</span> <span class="p">(</span><span class="n">myid</span><span class="o">==</span><span class="mi">0</span><span class="p">)</span> <span class="k">then</span>
<a name="ln-107"></a><span class="k">        write</span><span class="p">(</span><span class="o">*</span><span class="p">,</span><span class="s1">&#39;(A,F15.7,A,I4)&#39;</span><span class="p">)</span> <span class="s1">&#39;dump at time = &#39;</span><span class="p">,</span><span class="n">timee</span><span class="p">,</span><span class="s1">&#39; unit = &#39;</span><span class="p">,</span><span class="n">ifoutput</span>
<a name="ln-108"></a>      <span class="k">end if</span>
<a name="ln-109"></a>
<a name="ln-110"></a><span class="k">    end if</span>
<a name="ln-111"></a>
<a name="ln-112"></a><span class="k">  end subroutine </span><span class="n">writerestartfiles</span>
<a name="ln-113"></a>
<a name="ln-114"></a><span class="k">end module </span><span class="n">modsave</span>
</pre></div>

    </section>
    </div>
  </div>

  
    <hr>    
    </div> <!-- /container -->
    <footer>
      <div class="container">
      <div class="row">
        <div class="col-xs-6 col-md-4"><p>&copy; 2021 
                                          </p></div>
        <div class="col-xs-6 col-md-4 col-md-push-4">
          <p class="text-right">
            Documentation generated by 
            <a href="https://github.com/cmacmackin/ford">FORD</a>
            
          </p>
        </div>
        <div class="col-xs-12 col-md-4 col-md-pull-4"><p class="text-center"> uDALES was developed by The uDALES Team</p></div>
      </div>
      <br>
      </div> <!-- /container -->    
    </footer>

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
<!--
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
-->
    <script src="../js/bootstrap.min.js"></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="../js/ie10-viewport-bug-workaround.js"></script>

    <!-- MathJax JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'AMS' } },
        jax: ['input/TeX','input/MathML','output/HTML-CSS'],
        extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']
      });
    </script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    
    <script src="../tipuesearch/tipuesearch_content.js"></script>
    <script src="../tipuesearch/tipuesearch_set.js"></script>
    <script src="../tipuesearch/tipuesearch.js"></script>
    
    
  </body>
</html>